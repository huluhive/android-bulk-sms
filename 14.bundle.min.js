(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{353:function(e,a,t){"use strict";t.r(a);var n=t(17),s=t.n(n),l=t(0),r=t.n(l),c=t(1),m=t.n(c),i=t(87),o=t(123),u=t(2),d=t(39),p=t.n(d),E=t(34),f=t(99),b=t(100),g=t(22),N=t.n(g),v=t(26),h=t(96),S=t(52),y=t(53),C=t(25),M={createNewSms:function(e){return C.a.post("/smses/create",e,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},updateSms:function(e){return C.a.update("/smses/".concat(e.uuid),e,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},loadSmsMessages:function(){return C.a.get("user/smses",!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},deleteSmsById:function(e){return C.a.delete("/smses/".concat(e),!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},getSmsMessage:function(e){return C.a.get("/smses/".concat(e),!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},startSmsProcessing:function(e){return C.a.post("/smses/".concat(e,"/schedule"),{},!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},getSmsMessageSchedule:function(e,a,t,n){return C.a.get("/smses/".concat(e,"/schedule/").concat(t,"/").concat(n,"?status=").concat(a),!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},loadPaginatedSmsMessages:function(e,a,t){return C.a.get("/user/smses/"+a+"/"+t+"?status="+e,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))}},k=t(21),D=function(e){var a=Object(l.useState)([]),t=s()(a,2),n=t[0],c=t[1],m=Object(l.useState)(0),i=s()(m,2),o=i[0],d=i[1],g=Object(l.useState)([]),C=s()(g,2),D=C[0],P=C[1],O=Object(l.useState)("groups"),w=s()(O,2),j=w[0],I=w[1],x=Object(l.useState)(!1),T=s()(x,2),L=T[0],A=T[1],F=Object(l.useState)(""),R=s()(F,2),G=R[0],V=R[1],_=Object(l.useState)(""),B=s()(_,2),U=B[0],q=B[1],W=Object(l.useState)([]),Y=s()(W,2),Q=Y[0],z=Y[1],J=Object(l.useState)([]),$=s()(J,2),H=$[0],K=$[1],X=Object(l.useState)(""),Z=s()(X,2),ee=Z[0],ae=Z[1],te=Object(l.useState)(!1),ne=s()(te,2),se=ne[0],le=ne[1],re=Object(E.a)(),ce=re.register,me=re.handleSubmit,ie=re.errors,oe=re.getValues,ue=re.formState,de=re.unregister,pe=n.filter((function(e){return e.contactsCount>0})).map((function(e){return{label:e.name+" ("+e.contactsCount+")",value:e.id,data:e}}));Object(l.useEffect)((function(){return Ee(),fe(),function(){N.a.clearAllSubscriptions()}}),[]);var Ee=function(){y.a.loadAllGroups().then((function(e){e.success&&c(e.result.data)})),h.a.loadSmsDevices().then((function(e){e.success&&P(e.result.data.filter((function(e){return!1===e.isDeleted})))}))},fe=function(){k.a.loadAssets({cssLinks:[],jsLinks:[]})},be=function(e){return e.length<1?[]:S.a.searchContacts(e).then((function(e){return e.success?e.result.data.map((function(e){return{label:e.firstName+" "+e.middleName+" "+e.lastName,value:e.id,data:e}})):[]}))},ge=function(e){ie.contacts=e&&e.length?null:{message:"Please select at least one of the contacts"},K(e)},Ne=function(e){ie.groups=e&&e.length?null:{message:"Please select at least one contact groups"},z(e)},ve=function(e){switch(e){case"groups":de("contacts"),I("groups");break;case"contacts":de("groups"),I("contacts");break;default:de("groups"),de("contacts"),I("numbers")}};return r.a.createElement("form",{onSubmit:me((function(a,t){A(!0),a.groups=Q.map((function(e){return e.data})),a.contacts=H.map((function(e){return e.data})),M.createNewSms(a).then((function(a){a.success&&(t.target.reset(),N.a.publish("SMS:ADDED",a.result.data),e.cancel(),z([]),K([])),A(!1)}))}))},r.a.createElement("div",{className:"modal-body "+(L?"spinner pl-0":"")},r.a.createElement(u.a,{isLoading:L}),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"form-label"},"Send SMS To:"),r.a.createElement("div",{className:"selectgroup w-100"},r.a.createElement("label",{className:"selectgroup-item"},r.a.createElement("input",{type:"radio",name:"transportation",defaultValue:"groups",className:"selectgroup-input",defaultChecked:"groups"===j}),r.a.createElement("span",{className:"selectgroup-button selectgroup-button-icon",onClick:function(){return ve("groups")}},r.a.createElement("i",{className:"fa fa-address-book"}),"  Contact Groups")),r.a.createElement("label",{className:"selectgroup-item"},r.a.createElement("input",{type:"radio",name:"transportation",defaultValue:"contacts",className:"selectgroup-input",defaultChecked:"contacts"===j}),r.a.createElement("span",{className:"selectgroup-button selectgroup-button-icon",onClick:function(){return ve("contacts")}},r.a.createElement("i",{className:"fa fa-users"}),"  Selected Contacts")),r.a.createElement("label",{className:"selectgroup-item"},r.a.createElement("input",{type:"radio",name:"transportation",defaultValue:"numbers",className:"selectgroup-input",defaultChecked:"numbers"===j}),r.a.createElement("span",{className:"selectgroup-button selectgroup-button-icon",onClick:function(){return ve("numbers")}},r.a.createElement("i",{className:"fas fa-mobile"}),"  Specified Phone Numbers")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"form-control-label",htmlFor:"input-device"},"Choose Device:"),r.a.createElement("select",{id:"input-device",name:"smsDeviceId",className:"custom-select"+k.a.checkValadity("smsDeviceId",ie,ue),ref:ce({required:"Please select a SMS Device"}),onChange:function(e){return q(e.target.value)}},r.a.createElement("option",{key:"opt-no-device",value:""},"Select SMS Device"),D.filter((function(e){return e.isActive})).map((function(e){return r.a.createElement("option",{key:e.uuid,value:e.uuid},e.deviceName)}))),r.a.createElement("div",{className:"help-block"},r.a.createElement(v.a,{error:ie.smsDeviceId})))),r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"form-control-label",htmlFor:"input-device"},"SIM Card Options:"),r.a.createElement("select",{id:"input-device",name:"smsSimCardOption",className:"custom-select"+k.a.checkValadity("smsSimCardOption",ie,ue),ref:ce({required:"Please select a SMS Device"}),onChange:function(e){return ae(e.target.value)}},r.a.createElement("option",{value:""},"Select SMS Device"),r.a.createElement("option",{value:"AUTO_SELECT"},"Auto Select SIM Card"),r.a.createElement("option",{value:"DEFAULT"},"Default SIM Card"),r.a.createElement("option",{value:"SELECTED"},"Selected SIM Card")),r.a.createElement("div",{className:"help-block"},r.a.createElement(v.a,{error:ie.smsSimCardOption})))),"SELECTED"===ee?r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"form-control-label",htmlFor:"input-sim-card"},"Choose SIM Card:"),r.a.createElement("select",{id:"input-sim-card",name:"simCardId",ref:ce({required:"Please select the SIM card."}),className:"custom-select"+k.a.checkValadity("simCardId",ie,ue)},function(e){var a=r.a.createElement("option",{key:"opt-none",value:""},"No SIM Cards");if(e){var t=D.find((function(a){return a.uuid===e}));t&&(a=[r.a.createElement("option",{key:"opt-select",value:""},"Select SIM Cards")].concat(p()(t.cards.filter((function(e){return e.isActive&&!e.isDeleted})).map((function(e){return r.a.createElement("option",{key:e.uuid,value:e.uuid},e.displayName)})))))}return a}(U)),r.a.createElement("div",{className:"help-block"},r.a.createElement(v.a,{error:ie.simCardId})))):""),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-8"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"form-control-label",htmlFor:"input-title"},"Message Title:"),r.a.createElement("input",{type:"text",id:"input-title",name:"title",placeholder:"Message title",className:"form-control"+k.a.checkValadity("title",ie,ue),tabIndex:"1",ref:ce({required:"Please enter your Message Title.",minLength:{value:6,message:"Message Title should be minimum of 6 characters."}})}),r.a.createElement("div",{className:"help-block"},r.a.createElement(v.a,{error:ie.title})))),r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"form-control-label",htmlFor:"input-type"},"Choose SMS Type:"),r.a.createElement("select",{id:"input-type",name:"smsType",className:"custom-select"+k.a.checkValadity("smsType",ie,ue),ref:ce({required:"Please select a Message Type"})},r.a.createElement("option",{key:"opt-no-device",value:""},"Select Message Type"),r.a.createElement("option",{key:"Business",value:"Business"},"Business"),r.a.createElement("option",{key:"Promotion",value:"Promotion"},"Promotion"),r.a.createElement("option",{key:"Offer",value:"Offer"},"Offer"),r.a.createElement("option",{key:"Wishes",value:"Wishes"},"Wishes"),r.a.createElement("option",{key:"Notification",value:"Notification"},"Notification"),r.a.createElement("option",{key:"Others",value:"Others"},"Others")),r.a.createElement("div",{className:"help-block"},r.a.createElement(v.a,{error:ie.smsType})))),r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"contents",className:"form-control-label mb-0"},"Message Body:"),r.a.createElement("div",{className:"mt-0 mb-2"},r.a.createElement("span",{className:"text-primary"},r.a.createElement("strong",null,r.a.createElement("i",{className:"fa fa-info-circle"})," Quick Tip:"," "),"You can customize the message using placeholders by clicking the ones below the message box.")),r.a.createElement("textarea",{name:"contents",rows:"4",placeholder:"Write your message here ...",className:"form-control"+k.a.checkValadity("contents",ie,ue),tabIndex:"1",value:G,onChange:function(e){V(e.target.value),d(oe().contents.length)},ref:ce({required:"Please enter your Message Body.",minLength:{value:10,message:"Message Body should be minimum of 10 characters."}})}),r.a.createElement("div",{className:"help-block"},r.a.createElement(v.a,{error:ie.contents})),r.a.createElement("div",{className:"bg-black pt-2"},r.a.createElement("span",null,r.a.createElement("strong",null,"Placeholders:")),r.a.createElement("span",{className:"float-right"},r.a.createElement("strong",null,r.a.createElement("span",{className:o>10&&o<=160?"text-success":"text-warning"},"Characters:"," "," ",o),r.a.createElement("span",{className:"text-light"}," ","|"," "),r.a.createElement("span",{className:"text-danger"},Math.ceil(o/160).toFixed(0)," Message(s)"))),r.a.createElement("div",{className:"mt-1"},r.a.createElement("span",{type:"button",className:"badge badge-primary pl-3 pr-3 pb-2 mr-2 mb-2",onClick:function(e){e.preventDefault(),V(G+" {firstName}")}},"First Name"),r.a.createElement("span",{type:"button",className:"badge badge-secondary pl-3 pr-3 pb-2 mr-2 mb-2",onClick:function(e){e.preventDefault(),V(G+"{lastName}")}},"Last Name"),r.a.createElement("span",{type:"button",className:"badge badge-warning pl-3 pr-3 pb-2 mr-2 mb-2",onClick:function(e){e.preventDefault(),V(G+" {senderName}")}},"Sender Name"),r.a.createElement("span",{type:"button",className:"badge badge-success pl-3 pr-3 pb-2 mr-2 mb-2",onClick:function(e){e.preventDefault(),V(G+" {senderEmail}")}},"Sender Email"))))),function(){if(!j)return"";var e="";switch(j){case"groups":e=r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"groups",className:"form-control-label mb-0"},"Select Groups:"),r.a.createElement("div",{className:"mt-0 mb-2"},r.a.createElement("span",{className:"text-primary"},r.a.createElement("strong",null,r.a.createElement("i",{className:"fa fa-info-circle"})," Info:"," ")," ","Choose the Group(s) to which this SMS message needs to be sent.")),r.a.createElement(f.a,{id:"groups",name:"groups",isMulti:!0,closeMenuOnSelect:!1,placeholder:"Select Messaging Groups",onChange:Ne,options:pe||[],value:Q,ref:ce({name:"groups"},{validate:function(){return!(!Q||!Q.length)||"Please select at least one contact groups"}})}),r.a.createElement("div",{className:"help-block"},r.a.createElement(v.a,{error:ie.groups}))));break;case"contacts":de("groups"),e=r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"contacts",className:"form-control-label mb-0"},"Select Contacts:"),r.a.createElement("div",{className:"mt-0 mb-2"},r.a.createElement("span",{className:"text-primary"},r.a.createElement("strong",null,r.a.createElement("i",{className:"fa fa-info-circle"})," Info:"," ")," ","Choose the Contact(s) to which this SMS message needs to be sent.")),r.a.createElement(b.a,{id:"contacts",name:"contacts",isMulti:!0,loadOptions:be,closeMenuOnSelect:!1,placeholder:"Search Messaging Contacts",onChange:ge,value:H,ref:ce({name:"contacts"},{validate:function(){return!(!H||!H.length)||"Please select at least one of the contacts"}})}),r.a.createElement("div",{className:"help-block"},r.a.createElement(v.a,{error:ie.contacts}))));break;case"numbers":de("groups"),de("contacts"),e=r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"recepients",className:"form-control-label"},"Recepients:"),r.a.createElement("div",{className:"mt-0 mb-2"},r.a.createElement("span",{className:"text-primary"},r.a.createElement("i",{className:"fa fa-info-circle"})," Info:"," ",' "+" will be added automatically.')),r.a.createElement("input",{id:"recepients",name:"recepients",placeholder:"Eg. 977 9849038932, 977 8743987843",className:"form-control"+k.a.checkValadity("recepients",ie,ue),ref:ce({required:"Please enter your recepients.",pattern:{value:/^\d{9,13}(, \d{,13})*$/i,message:"Each recepient must be separated by comma(,)"}})}),r.a.createElement("div",{className:"help-block"},r.a.createElement(v.a,{error:ie.recepients}))));break;default:e=r.a.createElement("div",{className:"text-danger"},"Recepient(s) is required.")}return e}(),r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"form-control-label"},r.a.createElement("strong",null,"Is this a draft version?")),r.a.createElement("label",{className:"custom-switch mt-0 pl-0"},r.a.createElement("input",{type:"checkbox",name:"isInDraft",value:se,className:"custom-switch-input",defaultChecked:se,ref:ce()}),r.a.createElement("div",{className:"help-block"},r.a.createElement(v.a,{error:ie.isInDraft})),r.a.createElement("span",{className:"custom-switch-indicator mt-2",onClick:function(){return le(!se)}}),r.a.createElement("span",{className:"custom-switch-description mt-2",onClick:function(){return le(!se)}},se?"Yes save as draft.":"No, this is final version.")))))),r.a.createElement("div",{className:"modal-footer bg-whitesmoke"},r.a.createElement("div",{className:"text-left"},r.a.createElement("button",{className:"btn btn-lg btn-success mr-2",type:"reset"},"Clear Form"),r.a.createElement("button",{className:"btn btn-lg btn-primary mr-2",type:"submit"},"Save Messaging Group"),r.a.createElement("button",{className:"btn btn-lg btn-danger mr-2",type:"buton","data-dismiss":"modal",onClick:e.cancel},"Cancel"))))};D.propTypes={history:m.a.any,cancel:m.a.func};var P=Object(o.g)(r.a.memo(D)),O=t(97),w=t(16),j=function(e){var a=Object(l.useState)(!1),t=s()(a,2),n=t[0],c=t[1],m=Object(l.useState)(e.smsMessage),i=s()(m,1)[0];return r.a.createElement("tr",null,r.a.createElement("td",null,k.a.truncateString(i.title,30)),r.a.createElement("td",{className:"text-center"},r.a.createElement("span",{className:"badge custom-badge badge-primary"},i.smsType.toUpperCase())),r.a.createElement("td",{className:"text-center"},i.senderDevice.deviceName),r.a.createElement("td",{className:"text-center"},"SELECTED_SIM_CARD"===i.simCardOption?r.a.createElement("span",{className:"badge custom-badge badge-"+("Ncell"===i.senderSimCard.carrierName?"primary":"info")},i.senderSimCard.carrierName.toUpperCase()):r.a.createElement("span",{className:"text-info"},r.a.createElement("i",{className:"fas fa-check-circle"})," ",k.a.capatalize(i.simCardOption))),r.a.createElement("td",{className:"text-center"},r.a.createElement("span",{className:"badge badge-secondary"},k.a.capatalize(i.status))),r.a.createElement("td",null,r.a.createElement("div",{className:"text-right dropdown"},r.a.createElement("button",{type:"button",className:"btn btn-outline-primary btn-md","data-toggle":"dropdown"},n?r.a.createElement("span",{className:"spinner-grow spinner-grow-sm"}):r.a.createElement("span",{className:"fa fa-ellipsis-v"})," ","Actions"),r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right"},r.a.createElement("div",{className:"dropdown-title"},"Actions"),r.a.createElement(w.b,{className:"dropdown-item has-icon text-primary",to:"/dashboard/sms-messages/"+i.uuid+"/view"},r.a.createElement("i",{className:"fas fa-eye"})," View SMS Details"),"NEWLY_CREATED"===i.status&&i.isInDraft&&r.a.createElement(w.b,{className:"dropdown-item has-icon text-warning",to:"/dashboard/sms-messages/"+i.uuid+"/edit"},r.a.createElement("i",{className:"far fa-edit"})," Edit SMS Details"),"NEWLY_CREATED"===i.status&&r.a.createElement("div",null,r.a.createElement("div",{className:"dropdown-divider"}),r.a.createElement("a",{className:"dropdown-item has-icon text-info",href:"#",onClick:function(a){return t=a,n=i.uuid,t.preventDefault(),c(!0),void M.startSmsProcessing(n).then((function(a){a.success&&(c(!1),PubSub.publish("SUCCESS:MESSAGE",a.message),e.onDeleted(smsId))}),(function(e){PubSub.publish("ERROR:MESSAGE",e.message),c(!1)}));var t,n}},r.a.createElement("i",{className:"fa fa-paper-plane"})," Schedule SMS Message")),r.a.createElement("div",{className:"dropdown-divider"}),r.a.createElement("a",{className:"dropdown-item has-icon text-danger",href:"#",onClick:function(a){return function(a,t){a.preventDefault(),c(!0),M.deleteSmsById(t).then((function(a){c(!1),a.success&&e.onDeleted(t)}))}(a,i.uuid)}},r.a.createElement("i",{className:"fas fa-trash-alt"})," Delete SMS")))))};j.propTypes={history:m.a.any,smsMessage:m.a.object.isRequired,onDeleted:m.a.func.isRequired};var I=Object(o.g)(r.a.memo(j)),x=function(){var e=Object(l.useState)(10),a=s()(e,1)[0],t=Object(l.useState)(!1),n=s()(t,2),c=n[0],m=n[1],i=Object(l.useState)(0),o=s()(i,2),d=o[0],E=o[1],f=Object(l.useState)({count:0,items:[]}),b=s()(f,2),g=b[0],v=b[1],h=Object(l.useState)({class:"primary",label:"Newly Created",status:"NEWLY_CREATED"}),S=s()(h,2),y=S[0],C=S[1];N.a.subscribe("SMS:ADDED",(function(e,a){"SMS:ADDED"===e&&O(a)})),Object(l.useEffect)((function(){return P(),function(){N.a.clearAllSubscriptions()}}),[]);var k,D,P=function(){w("NEWLY_CREATED",d)},O=function(e){v({count:g.count++,items:[].concat(p()(g.items),[e])})},w=function(e,t){m(!0),M.loadPaginatedSmsMessages(e,t,a).then((function(e){m(!1),e.success&&(E(t),v(e.result.data))}),(function(e){m(!1),console.log(e.message)}))},j=function(e){v({count:g.count--,items:g.items.filter((function(a){return a.uuid!==e}))})},x=function(e,a){e.preventDefault(),a.status!==y.status&&(w(a.status,0),C(a))};return r.a.createElement("div",{className:"card card-"+y.class},r.a.createElement("div",{className:"card-header"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("ul",{className:"nav nav-pills"},r.a.createElement("li",{className:"nav-item mr-3",onClick:function(e){return x(e,{class:"primary",status:"NEWLY_CREATED",label:"Newly Created"})}},r.a.createElement("a",{className:"btn p-1 pl-3 pr-3"+("Newly Created"===y.label?" btn-primary":" btn-outline-primary"),href:"#"},"All Newly Added",r.a.createElement("span",{className:"badge badge-secondary"},r.a.createElement("i",{className:"fa fa-envelope"})))),r.a.createElement("li",{className:"nav-item mr-3",onClick:function(e){return x(e,{class:"info",status:"SENT_FOR_PROCESSING",label:"Queued"})}},r.a.createElement("a",{className:"btn p-1 pl-3 pr-3"+("All Scheduled"===y.label?" btn-info":" btn-outline-info"),href:"#"},"Scheduled"," ",r.a.createElement("span",{className:"badge badge-info"},r.a.createElement("i",{className:"fa fa-ellipsis-h"})))),r.a.createElement("li",{className:"nav-item mr-3",onClick:function(e){return x(e,{class:"warning",status:"BEING_PROCESSED",label:"Being Processed"})}},r.a.createElement("a",{className:"btn p-1 pl-3 pr-3"+("Being Processed"===y.label?" btn-warning":" btn-outline-warning"),href:"#"},"Being Processed",r.a.createElement("span",{className:"badge badge-warning"},r.a.createElement("i",{className:"fa fa-envelope-open"})))),r.a.createElement("li",{className:"nav-item mr-3",onClick:function(e){return x(e,{class:"success",status:"PROCESSING_COMPLETE",label:"Processing Complete"})}},r.a.createElement("a",{className:"btn p-1 pl-3 pr-3"+("Processing Complete"===y.label?" btn-success":" btn-outline-success"),href:"#"},"Processing Complete",r.a.createElement("span",{className:"badge badge-success"},r.a.createElement("i",{className:"fa fa-check"})))))))),r.a.createElement("div",{className:"card-body p-0"+(c?" spinner":"")},r.a.createElement(u.a,{isLoading:c}),r.a.createElement("div",{className:"standard-table table-responsive"},r.a.createElement("table",{className:"table table-stripped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Message Title"),r.a.createElement("th",{className:"text-center"},"Type"),r.a.createElement("th",{className:"text-center"},"Sending Device"),r.a.createElement("th",{className:"text-center"},"Sending SIM Card"),r.a.createElement("th",{className:"text-center"},"Message Status"),r.a.createElement("th",null))),r.a.createElement("tbody",null,g.items.length?g.items.map((function(e){return r.a.createElement(I,{key:e.uuid,smsMessage:e,onDeleted:j})})):r.a.createElement("tr",{className:"text-"+y.class+" text-center"},r.a.createElement("td",{colSpan:7},r.a.createElement("strong",null,r.a.createElement("i",{className:"fa fa-info-circle"})," Info:"," "),r.a.createElement("span",{className:"mr-4"},"There are no SMS messages in this list yet!"))))))),r.a.createElement("div",{className:"text-center pb-4"},(k=g.count,D=Math.ceil(k/a),r.a.createElement("nav",{"aria-label":"Sms Messages Pagination"},r.a.createElement("ul",{className:"pagination justify-content-center mb-0"},r.a.createElement("li",{className:"page-item "+(d<=0?"disabled":"")},r.a.createElement("span",{className:"page-link",tabIndex:"-1",onClick:function(){return w(d-1)}},r.a.createElement("i",{className:"fas fa-angle-left"}),r.a.createElement("span",{className:"sr-only"},"Previous"))),function(){for(var e=[],a=function(a){e.push(r.a.createElement("li",{className:"page-item"+(a===d?" active":""),key:a,onClick:function(){return w(a)}},r.a.createElement("span",{className:"page-link"},a+1)))},t=0;t<D;t++)a(t);return r.a.createElement(l.Fragment,null,e)}(),r.a.createElement("li",{className:"page-item "+(D===d+1?"disabled":"")},r.a.createElement("span",{className:"page-link",onClick:function(){return w(d+1)}},r.a.createElement("i",{className:"fas fa-angle-right"}),r.a.createElement("span",{className:"sr-only"},"Next"))))))))};x.propTypes={history:m.a.any};var T=Object(o.g)(r.a.memo(x)),L=function(e){var a=Object(l.useState)(10),t=s()(a,1)[0],n=Object(l.useState)(!1),c=s()(n,2),m=c[0],i=c[1],o=Object(l.useState)(0),d=s()(o,2),p=d[0],E=d[1],f=Object(l.useState)(!1),b=s()(f,2),g=b[0],v=b[1],h=Object(l.useState)(!1),S=s()(h,2),y=S[0],C=S[1],D=Object(l.useState)({uuid:"",title:"",body:"",groups:[],status:""}),P=s()(D,2),O=P[0],w=P[1],j=Object(l.useState)({count:0,items:[]}),I=s()(j,2),x=I[0],T=I[1],L=Object(l.useState)({class:"primary",label:"Queued",status:"SMS_QUEUED"}),A=s()(L,2),F=A[0],R=A[1];Object(l.useEffect)((function(){return B(),function(){N.a.clearAllSubscriptions()}}),[]);var G,V,_,B=function(){U(e.match.params.smsMessageId)},U=function(e){v(!0),M.getSmsMessage(e).then((function(a){v(!1),a.success&&(w(a.result.data),q(e,F.status,p))}))},q=function(e,a,n){C(!0),M.getSmsMessageSchedule(e,a,n,t).then((function(e){C(!1),e.success&&(E(n),T(e.result.data))}),(function(e){N.a.publish("ERROR:MESSAGE",e.message),C(!1)}))},W=function(e,a){e.preventDefault(),q(O.uuid,a.status,0),R(a)};return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4 col-lg-4"},r.a.createElement("div",{className:"card "+("NEWLY_CREATED"!==O.status?"card-info":" card-primary")},r.a.createElement("div",{className:"card-header"},r.a.createElement("h4",null,r.a.createElement("i",{className:"fa fa-address-card"})," SMS Details"),r.a.createElement("div",{className:"card-header-action"},r.a.createElement("span",{className:"badge badge-"+(O.isInDraft?"warning":"info")},r.a.createElement("i",{className:"fas fa-"+(O.isInDraft?"file":"check")})," ",O.isInDraft?"Saved as Draft":k.a.capatalize(O.status)))),r.a.createElement("div",{className:"card-body"+(g?" pl-0 spinner min-height-500":"")},r.a.createElement(u.a,{isLoading:g}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",null,r.a.createElement("div",{className:"heading-md mt-2 mb-1"},r.a.createElement("strong",null,"Title:")),r.a.createElement("span",null,O.title))),r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",null,r.a.createElement("div",{className:"heading-md mt-2 mb-1"},r.a.createElement("strong",null,"Message Body:")),r.a.createElement("div",{className:"card card-body bg-light text-primary mb-1"},r.a.createElement("span",{style:{whiteSpace:"pre-wrap"}},O.contents)))),!(!O.groups||!O.groups.length)&&r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",null,r.a.createElement("div",{className:"heading-md mt-2 mb-1"},r.a.createElement("strong",null,"Message Groups:")),O.groups.map((function(e){return r.a.createElement("span",{key:e.uuid,type:"button",title:e.notes,className:"badge pl-2 pr-2 pb-1 pt-1 mr-2 mb-2 "+(e.isFavourite?"badge-primary":"badge-warning")},e.name)})))),!(!O.contacts||!O.contacts.length)&&r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",null,r.a.createElement("div",{className:"heading-md mt-2 mb-1"},r.a.createElement("strong",null,"Message Contacts:")),O.contacts.map((function(e){return r.a.createElement("span",{key:e.uuid,type:"button",title:e.firstName,className:"badge pl-2 pr-2 pb-1 pt-1 mr-2 mb-2 badge-primary"},e.firstName)})))),!(!O.recepients||!O.recepients.length)&&r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",null,r.a.createElement("div",{className:"heading-md mt-2 mb-1"},r.a.createElement("strong",null,"Message Contacts:")),O.recepients.map((function(e){return r.a.createElement("span",{key:e,type:"button",title:e,className:"badge pl-2 pr-2 pb-1 pt-1 mr-2 mb-2 badge-primary"},e)})))),r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",null,r.a.createElement("div",{className:"heading-md mt-2 mb-1"},r.a.createElement("strong",null,"Message Status:")),r.a.createElement("span",{className:"badge badge-info pl-2 pr-2 pb-1 pt-1 mr-2 mb-2"},k.a.capatalize(O.status)))),r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",null,r.a.createElement("div",{className:"heading-md mt-2 mb-1"},r.a.createElement("strong",null,"Message Date:")),r.a.createElement("span",null,r.a.createElement("i",{className:"fa fa-clock"})," ",O.createdDate))))),r.a.createElement("div",{className:"card-footer"},g?"":(_="NEWLY_CREATED"!==O.status,r.a.createElement("div",{className:"text-center"},r.a.createElement("span",{className:"btn btn-md mr-2 "+(_?"btn-info disabled":"btn-success"),disabled:_||O.isInDraft,type:"button",onClick:function(){return!_&&(a=e.match.params.smsMessageId,i(!0),void M.startSmsProcessing(a).then((function(e){e.success&&(w(O),q(a,F.status,p),O.status="SENT_FOR_PROCESSING",N.a.publish("SUCCESS:MESSAGE",e.message),i(!1))}),(function(e){N.a.publish("ERROR:MESSAGE",e.message),i(!1)})));var a}},m?r.a.createElement("span",{className:"spinner-grow spinner-grow-sm"}):""," ",_?"Sent":"Send"," ","For Processing"),r.a.createElement("span",{className:"btn btn-md btn-primary mr-2"+(_?" disabled":""),title:"Edit SMS",type:"button",disabled:_&&!O.isInDraft,onClick:function(a){return!_&&(t=O,a.preventDefault(),e.history.push("/dashboard/sms-messages/"+t.uuid+"/edit"));var t}},r.a.createElement("i",{className:"fa fa-pen"})),r.a.createElement("span",{className:"btn btn-md btn-danger mr-2"+(_?" disabled":""),title:"Delete SMS",type:"buton",disabled:_,onClick:function(a){return!_&&(t=a,n=O.uuid,t.preventDefault(),v(!0),void M.deleteSmsById(n).then((function(a){v(!1),a.success&&e.history.push("/dashboard/sms-messages")})));var t,n}},r.a.createElement("i",{className:"fa fa-trash"}))))))),r.a.createElement("div",{className:"col-md-8 col-lg-8"},r.a.createElement("div",{className:"card card-"+F.class},r.a.createElement("div",{className:"card-header"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("ul",{className:"nav nav-pills"},r.a.createElement("li",{className:"mr-3",onClick:function(e){return W(e,{class:"secondary",status:"SMS_QUEUED",label:"Queued"})}},r.a.createElement("a",{className:"btn btn-md "+("Queued"===F.label?"btn-primary":"btn-outline-primary"),href:"#"},"Queued"," ",r.a.createElement("span",{className:"text-xs badge badge-secondary"},r.a.createElement("i",{className:"fa fa-angle-double-right"})))),r.a.createElement("li",{className:"mr-3",onClick:function(e){return W(e,{class:"warning",status:"SMS_TRIED",label:"Tried"})}},r.a.createElement("a",{className:"btn btn-md "+("Tried"===F.label?"btn-warning":"btn-outline-warning"),href:"#"},"Tried Sending"," ",r.a.createElement("span",{className:"text-xs badge badge-warning"},r.a.createElement("i",{className:"fa fa-ellipsis-h"})))),r.a.createElement("li",{className:"mr-3",onClick:function(e){return W(e,{class:"info",status:"SMS_SENT",label:"Sent"})}},r.a.createElement("a",{className:"btn btn-md "+("Sent"===F.label?"btn-info":"btn-outline-info"),href:"#"},"Sent"," ",r.a.createElement("span",{className:"text-xs badge badge-info"},r.a.createElement("i",{className:"fa fa-paper-plane"})))),r.a.createElement("li",{className:"mr-3",onClick:function(e){return W(e,{class:"success",status:"SMS_DELIVERED",label:"Delivered"})}},r.a.createElement("a",{className:"btn btn-md "+("Delivered"===F.label?"btn-success":"btn-outline-success"),href:"#"},"Delivered"," ",r.a.createElement("span",{className:"text-xs badge badge-success"},r.a.createElement("i",{className:"fa fa-check"})))),r.a.createElement("li",{className:"mr-3",onClick:function(e){return W(e,{class:"danger",status:"SMS_FAILED",label:"Failed"})}},r.a.createElement("a",{className:"btn btn-md "+("Failed"===F.label?"btn-danger":"btn-outline-danger"),href:"#"},"Failed"," ",r.a.createElement("span",{className:"text-xs badge badge-danger"},r.a.createElement("i",{className:"fa fa-exclamation-circle"})))))))),r.a.createElement("div",{className:"card-body pt-0 pl-0 pr-0 min-height-500 "+(y?" spinner":"")},r.a.createElement(u.a,{isLoading:y}),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-striped c-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"Contact Name"),r.a.createElement("th",null,"Phone Number"),r.a.createElement("th",{className:"text-center"},"Sender SIM Card"))),r.a.createElement("tbody",null,x.items.length?x.items.map((function(e,a){return r.a.createElement("tr",{key:e.uuid},r.a.createElement("td",null,p+a+1),r.a.createElement("td",null,k.a.truncateString(e.receiver.name,25)),r.a.createElement("td",null,e.receiver.phoneNumber," "," ",r.a.createElement("small",{className:"badge custom-badge badge-"+("NCELL"===e.receiver.simType?"primary":"warning")},e.receiver.simType)),r.a.createElement("td",{className:"text-center"},r.a.createElement("span",{className:"badge pl-2 pr-2 pb-1 pt-1 badge-"+(e.sendingSimCard.isDefault?"primary":"success")},r.a.createElement("i",{className:"fa fa-check-circle"})," ",e.sendingSimCard.displayName)))})):r.a.createElement("tr",{className:"text-center text-"+F.class},r.a.createElement("td",{colSpan:4},r.a.createElement("strong",null,r.a.createElement("i",{className:"fa fa-info-circle"})," Info:"," "),r.a.createElement("span",{className:"mr-4"},"There are no SMS Messages yet!"))))))),r.a.createElement("div",{className:"card-footer"},(G=x.count,V=Math.ceil(G/t),r.a.createElement("nav",{"aria-label":"Sms Messages Pagination"},r.a.createElement("ul",{className:"pagination justify-content-center mb-0"},r.a.createElement("li",{className:"page-item "+(p<=0?"disabled":"")},r.a.createElement("span",{className:"page-link",tabIndex:"-1",onClick:function(){return q(O.uuid,scheduleStatus,p-1)}},r.a.createElement("i",{className:"fas fa-angle-left"}),r.a.createElement("span",{className:"sr-only"},"Previous"))),function(){for(var e=[],a=function(a){e.push(r.a.createElement("li",{className:"page-item"+(a===p?" active":""),key:a,onClick:function(){return q(a)}},r.a.createElement("span",{className:"page-link"},a+1)))},t=0;t<V;t++)a(t);return r.a.createElement(l.Fragment,null,e)}(),r.a.createElement("li",{className:"page-item "+(V===p+1?"disabled":"")},r.a.createElement("span",{className:"page-link",onClick:function(){return q(O.uuid,scheduleStatus,p+1)}},r.a.createElement("i",{className:"fas fa-angle-right"}),r.a.createElement("span",{className:"sr-only"},"Next"))))))))))};L.propTypes={history:m.a.any,match:m.a.any};var A=Object(o.g)(L),F=function(e){var a=Object(l.useState)([]),t=s()(a,2),n=t[0],c=t[1],m=Object(l.useState)(0),i=s()(m,2),o=i[0],d=i[1],g=Object(l.useState)([]),C=s()(g,2),D=C[0],P=C[1],O=Object(l.useState)("groups"),j=s()(O,2),I=j[0],x=j[1],T=Object(l.useState)(!1),L=s()(T,2),A=L[0],F=L[1],R=Object(l.useState)(""),G=s()(R,2),V=G[0],_=G[1],B=Object(l.useState)(!1),U=s()(B,2),q=U[0],W=U[1],Y=Object(l.useState)({}),Q=s()(Y,2),z=Q[0],J=Q[1],$=Object(l.useState)([]),H=s()($,2),K=H[0],X=H[1],Z=Object(l.useState)(null),ee=s()(Z,2),ae=ee[0],te=ee[1],ne=Object(l.useState)([]),se=s()(ne,2),le=se[0],re=se[1],ce=Object(l.useState)(null),me=s()(ce,2),ie=me[0],oe=me[1],ue=Object(l.useState)(null),de=s()(ue,2),pe=de[0],Ee=de[1],fe=Object(l.useState)(null),be=s()(fe,2),ge=be[0],Ne=be[1],ve=Object(E.a)(),he=ve.register,Se=ve.handleSubmit,ye=ve.errors,Ce=ve.getValues,Me=ve.formState,ke=ve.unregister,De=n.filter((function(e){return e.contactsCount>0})).map((function(e){return{label:e.name+" ("+e.contactsCount+")",value:e.id,data:e}})),Pe=D.filter((function(e){return!e.isDeleted&&e.isActive})).map((function(e){return{label:e.deviceName,value:e.uuid,data:e}})),Oe=[{label:"Auto Select SIM Card",value:"AUTO_SELECT"},{label:"Default SIM Card",value:"DEFAULT"},{label:"Selected SIM Card",value:"SELECTED"}],we=[{label:"Business",value:"Business"},{label:"Promotion",value:"Promotion"},{label:"Offer",value:"Offer"},{label:"Wishes",value:"Wishes"},{label:"Notification",value:"Notification"},{label:"Others",value:"Others"}];Object(l.useEffect)((function(){je(),Ie()}),[]);var je=function(){y.a.loadAllGroups().then((function(e){e.success&&c(e.result.data)})),h.a.loadSmsDevices().then((function(e){e.success&&P(e.result.data.filter((function(e){return!1===e.isDeleted})))})),F(!0),M.getSmsMessage(e.match.params.smsMessageId).then((function(e){e.success&&(J(e.result.data),W(e.result.data.isInDraft),_(e.result.data.contents),d(e.result.data.contents.length),Ee(we.find((function(a){return a.value===e.result.data.smsType}))),te({label:e.result.data.senderDevice.deviceName,value:e.result.data.senderDevice.uuid,data:e.result.data.senderDevice}),e.result.data.contacts.length?(x("contacts"),re(e.result.data.contacts.map((function(e){return{label:e.firstName+" "+e.lastName,value:e.uuid,data:e}})))):e.result.data.groups.length?(x("groups"),X(e.result.data.groups.map((function(e){return{label:e.name,value:e.id,data:e}})))):e.result.data.recepients.length&&x("numbers"),e.result.data.simCardOption&&(Ne(Oe.find((function(a){return a.value===e.result.data.simCardOption}))),"SELECTED"===e.result.data.simCardOption&&oe({label:e.result.data.senderSimCard.displayName,value:e.result.data.senderSimCard.uuid,data:e.result.data.senderSimCard}))),F(!1)}))},Ie=function(){k.a.loadAssets({cssLinks:[],jsLinks:[]})},xe=function(e){return e.length<1?[]:S.a.searchContacts(e).then((function(e){return e.success?e.result.data.map((function(e){return{label:e.firstName+" "+e.middleName+" "+e.lastName,value:e.id,data:e}})):[]}))},Te=function(e){ye.contacts=e&&e.length?null:{message:"Please select at least one of the contacts"},re(e)},Le=function(e){ye.groups=e&&e.length?null:{message:"Please select at least one contact groups"},X(e)},Ae=function(e){switch(e){case"groups":ke("contacts"),x("groups");break;case"contacts":ke("groups"),x("contacts");break;default:ke("groups"),ke("contacts"),x("numbers")}};return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row align-items-center"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("h3",{className:"mb-0"},"Edit SMS Message "),r.a.createElement("span",{className:"text-primary"},r.a.createElement("strong",null,r.a.createElement("i",{className:"fa fa-info-circle"})," Info:"," "),"Your SMS Message information will be saved using ",r.a.createElement("strong",null,"bank level security"),".")))),r.a.createElement("form",{onSubmit:Se((function(a){F(!0),a.uuid=e.match.params.smsMessageId,a.smsDeviceId=ae.data.uuid,a.smsSimCardOption=ge.value,a.smsType=pe.value,a.groups=K.map((function(e){return e.data})),a.contacts=le.map((function(e){return e.data})),a.simCardId="SELECTED"===ge.value?ie.data.uuid:null,M.updateSms(a).then((function(e){e.success&&N.a.publish("SUCCESS:MESSAGE",e.message),F(!1)}))}))},r.a.createElement("div",{className:"modal-body "+(A?"spinner pl-0":"")},r.a.createElement(u.a,{isLoading:A}),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"form-label"},"Send SMS To:"),r.a.createElement("div",{className:"selectgroup w-100"},r.a.createElement("label",{className:"selectgroup-item"},r.a.createElement("input",{type:"radio",name:"transportation",defaultValue:"groups",className:"selectgroup-input",defaultChecked:"groups"===I}),r.a.createElement("span",{className:"selectgroup-button selectgroup-button-icon",onClick:function(){return Ae("groups")}},r.a.createElement("i",{className:"fa fa-address-book"}),"  Contact Groups")),r.a.createElement("label",{className:"selectgroup-item"},r.a.createElement("input",{type:"radio",name:"transportation",defaultValue:"contacts",className:"selectgroup-input",defaultChecked:"contacts"===I}),r.a.createElement("span",{className:"selectgroup-button selectgroup-button-icon",onClick:function(){return Ae("contacts")}},r.a.createElement("i",{className:"fa fa-users"}),"  Selected Contacts")),r.a.createElement("label",{className:"selectgroup-item"},r.a.createElement("input",{type:"radio",name:"transportation",defaultValue:"numbers",className:"selectgroup-input",defaultChecked:"numbers"===I}),r.a.createElement("span",{className:"selectgroup-button selectgroup-button-icon",onClick:function(){return Ae("numbers")}},r.a.createElement("i",{className:"fas fa-mobile"}),"  Specified Phone Numbers")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"smsDeviceId",className:"form-control-label"},"Choose SMS Device:"),r.a.createElement(f.a,{id:"smsDeviceId",name:"smsDeviceId",options:Pe||[],value:ae,placeholder:"Search SMS Device",onChange:function(e){te(e)},ref:he({name:"smsDeviceId"},{validate:function(){return!!ae||"Please select a SMS Device"}})}),r.a.createElement("div",{className:"help-block"},r.a.createElement(v.a,{error:ye.smsDeviceId})))),r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"simCardOption",className:"form-control-label"},"SIM Card Options:"),r.a.createElement(f.a,{id:"simCardOption",name:"simCardOption",options:Oe||[],value:ge,placeholder:"Search SIM Card Options",onChange:function(e){Ne(e)},ref:he({name:"simCardOption"},{validate:function(){return!!ge||"Please select a SIM Card option"}})}),r.a.createElement("div",{className:"help-block"},r.a.createElement(v.a,{error:ye.simCardOption})))),ge&&"SELECTED"===ge.value?r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"simCardId",className:"form-control-label"},"Choose SIM Card:"),r.a.createElement(f.a,{id:"simCardId",name:"simCardId",options:function(e){var a=[];if(e){var t=D.find((function(a){return a.uuid===e.value}));t&&(a=p()(t.cards.filter((function(e){return e.isActive&&!e.isDeleted})).map((function(e){return{label:e.displayName,value:e.uuid,data:e}}))))}return a}(ae)||[],value:ie,placeholder:"Search SIM Card",onChange:function(e){oe(e)},ref:he({name:"simCardId"},{validate:function(){return!!ie||"Please select a SIM Card"}})}),r.a.createElement("div",{className:"help-block"},r.a.createElement(v.a,{error:ye.simCardId})))):""),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-8"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"form-control-label",htmlFor:"input-title"},"Message Title:"),r.a.createElement("input",{type:"text",id:"input-title",name:"title",defaultValue:z.title,placeholder:"Message title",className:"form-control"+k.a.checkValadity("title",ye,Me),tabIndex:"1",ref:he({required:"Please enter your Message Title.",minLength:{value:6,message:"Message Title should be minimum of 6 characters."}})}),r.a.createElement("div",{className:"help-block"},r.a.createElement(v.a,{error:ye.title})))),r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"form-control-label",htmlFor:"smsType"},"Choose SMS Type:"),r.a.createElement(f.a,{id:"smsType",name:"smsType",options:we||[],value:pe,placeholder:"Search SMS Type",onChange:function(e){Ee(e)},ref:he({name:"smsType"},{validate:function(){return!!pe||"Please select a SMS Type"}})}),r.a.createElement("div",{className:"help-block"},r.a.createElement(v.a,{error:ye.smsType})))),r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"contents",className:"form-control-label mb-0"},"Message Body:"),r.a.createElement("div",{className:"mt-0 mb-2"},r.a.createElement("span",{className:"text-primary"},r.a.createElement("strong",null,r.a.createElement("i",{className:"fa fa-info-circle"})," Quick Tip:"," "),"You can customize the message using placeholders by clicking the ones below the message box.")),r.a.createElement("textarea",{name:"contents",rows:"4",placeholder:"Write your message here ...",className:"form-control"+k.a.checkValadity("contents",ye,Me),tabIndex:"1",value:V,onChange:function(e){_(e.target.value),d(Ce().contents.length)},ref:he({required:"Please enter your Message Body.",minLength:{value:10,message:"Message Body should be minimum of 10 characters."}})}),r.a.createElement("div",{className:"help-block"},r.a.createElement(v.a,{error:ye.contents})),r.a.createElement("div",{className:"bg-black pt-2"},r.a.createElement("span",null,r.a.createElement("strong",null,"Placeholders:")),r.a.createElement("span",{className:"float-right"},r.a.createElement("strong",null,r.a.createElement("span",{className:o>10&&o<=160?"text-success":"text-warning"},"Characters:"," "," ",o),r.a.createElement("span",{className:"text-light"}," ","|"," "),r.a.createElement("span",{className:"text-danger"},Math.ceil(o/160).toFixed(0)," Message(s)"))),r.a.createElement("div",{className:"mt-1"},r.a.createElement("span",{type:"button",className:"badge badge-primary pl-3 pr-3 pb-2 mr-2 mb-2",onClick:function(e){e.preventDefault(),_(V+" {firstName}")}},"First Name"),r.a.createElement("span",{type:"button",className:"badge badge-secondary pl-3 pr-3 pb-2 mr-2 mb-2",onClick:function(e){e.preventDefault(),_(V+"{lastName}")}},"Last Name"),r.a.createElement("span",{type:"button",className:"badge badge-warning pl-3 pr-3 pb-2 mr-2 mb-2",onClick:function(e){e.preventDefault(),_(V+" {senderName}")}},"Sender Name"),r.a.createElement("span",{type:"button",className:"badge badge-success pl-3 pr-3 pb-2 mr-2 mb-2",onClick:function(e){e.preventDefault(),_(V+" {senderEmail}")}},"Sender Email"))))),function(){if(!I)return"";var e="";switch(I){case"groups":e=r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"groups",className:"form-control-label mb-0"},"Select Groups:"),r.a.createElement("div",{className:"mt-0 mb-2"},r.a.createElement("span",{className:"text-primary"},r.a.createElement("strong",null,r.a.createElement("i",{className:"fa fa-info-circle"})," Info:"," ")," ","Choose the Group(s) to which this SMS message needs to be sent.")),r.a.createElement(f.a,{id:"groups",name:"groups",isMulti:!0,closeMenuOnSelect:!1,placeholder:"Select Messaging Groups",onChange:Le,options:De||[],value:K,ref:he({name:"groups"},{validate:function(){return!(!K||!K.length)||"Please select at least one contact groups"}})}),r.a.createElement("div",{className:"help-block"},r.a.createElement(v.a,{error:ye.groups}))));break;case"contacts":ke("groups"),e=r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"contacts",className:"form-control-label mb-0"},"Select Contacts:"),r.a.createElement("div",{className:"mt-0 mb-2"},r.a.createElement("span",{className:"text-primary"},r.a.createElement("strong",null,r.a.createElement("i",{className:"fa fa-info-circle"})," Info:"," ")," ","Choose the Contact(s) to which this SMS message needs to be sent.")),r.a.createElement(b.a,{id:"contacts",name:"contacts",isMulti:!0,loadOptions:xe,closeMenuOnSelect:!1,placeholder:"Search Messaging Contacts",onChange:Te,value:le,ref:he({name:"contacts"},{validate:function(){return!(!le||!le.length)||"Please select at least one of the contacts"}})}),r.a.createElement("div",{className:"help-block"},r.a.createElement(v.a,{error:ye.contacts}))));break;case"numbers":ke("groups"),ke("contacts"),e=r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"recepients",className:"form-control-label"},"Recepients:"),r.a.createElement("div",{className:"mt-0 mb-2"},r.a.createElement("span",{className:"text-primary"},r.a.createElement("i",{className:"fa fa-info-circle"})," Info:"," ",' "+" will be added automatically.')),r.a.createElement("input",{id:"recepients",name:"recepients",placeholder:"Eg. 977 9849038932, 977 8743987843",defaultValue:z.recepients?z.recepients.join(", "):"",className:"form-control"+k.a.checkValadity("recepients",ye,Me),ref:he({required:"Please enter your recepients.",pattern:{value:/^\d{9,13}(, \d{9,13})*$/i,message:"Each recepient must be separated by comma(,)"}})}),r.a.createElement("div",{className:"help-block"},r.a.createElement(v.a,{error:ye.recepients}))));break;default:e=r.a.createElement("div",{className:"text-danger"},"Recepient(s) is required.")}return e}(),r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"form-control-label"},r.a.createElement("strong",null,"Is this a draft version?")),r.a.createElement("label",{className:"custom-switch mt-0 pl-0"},r.a.createElement("input",{type:"checkbox",name:"isInDraft",value:q,className:"custom-switch-input",checked:q,ref:he(),onChange:function(e){return e}}),r.a.createElement("div",{className:"help-block"},r.a.createElement(v.a,{error:ye.isInDraft})),r.a.createElement("span",{className:"custom-switch-indicator mt-2",onClick:function(){return W(!q)}}),r.a.createElement("span",{className:"custom-switch-description mt-2",onClick:function(){return W(!q)}},q?"Yes save as draft.":"No, this is final version.")))))),r.a.createElement("div",{className:"modal-footer bg-whitesmoke"},r.a.createElement("div",{className:"text-left"},r.a.createElement("button",{className:"btn btn-lg btn-primary mr-2",type:"submit"},"Update SMS Message"),r.a.createElement(w.b,{className:"btn btn-lg btn-danger mr-2",to:"/dashboard/sms-messages"},"Cancel")))))};F.propTypes={history:m.a.any,match:m.a.object};var R=Object(o.g)(r.a.memo(F)),G=[{path:"/dashboard/sms-messages",exact:!0,sidebar:function(){return r.a.createElement("div",null,"SMS Messages")},main:function(){return r.a.createElement(r.a.Suspense,{fallback:r.a.createElement(u.a,{isLoading:!0})},r.a.createElement(T,{title:"SMS Messages"}))}},{path:"/dashboard/sms-messages/:smsMessageId/view",exact:!0,sidebar:function(){return r.a.createElement("div",null,"View SMS Messages")},main:function(){return r.a.createElement(r.a.Suspense,{fallback:r.a.createElement(u.a,{isLoading:!0})},r.a.createElement(A,{title:"SMS Message Details"}))}},{path:"/dashboard/sms-messages/:smsMessageId/edit",exact:!0,sidebar:function(){return r.a.createElement("div",null,"Edit SMS Messages")},main:function(){return r.a.createElement(r.a.Suspense,{fallback:r.a.createElement(u.a,{isLoading:!0})},r.a.createElement(R,{title:"SMS Message Edit Form"}))}}],V=function(){var e=Object(l.useState)(!1),a=s()(e,1)[0],t=Object(l.useState)(!1),n=s()(t,2),c=n[0],m=n[1];Object(l.useEffect)((function(){d()}),[]);var d=function(){k.a.loadAssets({cssLinks:[],jsLinks:[""]})},p=function(){m(!c)};return r.a.createElement("div",{className:""},r.a.createElement(o.d,null,G.map((function(e,a){return r.a.createElement(o.b,{key:a,path:e.path,exact:e.exact})}))),r.a.createElement("section",{className:"section"},r.a.createElement(u.a,{isLoading:a}),r.a.createElement(i.a,{in:!0,appear:!0,timeout:500,classNames:"hero"},r.a.createElement("div",{className:"section-header"},r.a.createElement("h5",{className:"mb-0 mr-5"},r.a.createElement("i",{className:"fa fa-comments"})," SMS Messages"),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{type:"button",className:"btn mb-0 btn-primary btn-md text-small mr-3",onClick:function(){return p()}},r.a.createElement("span",{className:"badge badge-transparent"},r.a.createElement("i",{className:"fa fa-envelope"}))," ","New SMS Message")),r.a.createElement("div",{className:"section-header-breadcrumb"},r.a.createElement("div",{className:"breadcrumb-item active"},r.a.createElement("a",{href:"#"},"Dashboard")),r.a.createElement("div",{className:"breadcrumb-item"},"SMS Messages")))),r.a.createElement(i.a,{in:!0,appear:!0,timeout:1500,classNames:"fade"},r.a.createElement("div",{className:"section-body"},r.a.createElement(o.d,null,G.map((function(e,a){return r.a.createElement(o.b,{key:a,path:e.path,exact:e.exact,children:r.a.createElement(e.main,null)})})))))),r.a.createElement(O.a,{isOpen:c,header:r.a.createElement((function(){return r.a.createElement("div",{className:"row align-items-center"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("h3",{className:"mb-0"},"Create SMS Message "),r.a.createElement("span",{className:"text-primary"},r.a.createElement("strong",null,r.a.createElement("i",{className:"fa fa-info-circle"})," Info:"," "),"Your SMS Message information will be saved using ",r.a.createElement("strong",null,"bank level security"),".")))}),null),content:r.a.createElement(P,{cancel:p}),closeModal:p}))};V.propTypes={history:m.a.any};a.default=Object(o.g)(r.a.memo(V))},52:function(e,a,t){"use strict";var n=t(25),s={createContact:function(e){return n.a.post("/contacts/create",e,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},updateContact:function(e,a){return n.a.update("/user/contacts/"+e,a,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},quickUpdateUserContact:function(e,a,t){return n.a.get("/user/contacts/"+e+"/quick-update/"+a+"/"+t,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},uploadContacts:function(e){var a=new FormData;return a.append("action","import-contacts"),e.files.forEach((function(e){return a.append("files",e)})),n.a.post("/import/contacts",a,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},uploadGroupContacts:function(e){var a=new FormData;return a.append("groups",e.groups),e.files.forEach((function(e){return a.append("files",e)})),n.a.post("/import/group/contacts",a,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},searchContacts:function(e){return n.a.get("/user/contacts/search?query="+e,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},loadContactByUuid:function(e){return n.a.get("/user/contacts/"+e,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},loadPaginatedContacts:function(e,a){return n.a.get("/user/contacts/"+e+"/"+a,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},deleteContactById:function(e){return n.a.delete("/user/contacts/".concat(e),!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))}};a.a=s},53:function(e,a,t){"use strict";var n=t(25),s={createGroup:function(e){return n.a.post("/groups/create",e,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},updateGroup:function(e,a){return n.a.update("/groups/"+a,e,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},quickUpdateUserGroup:function(e,a,t){return n.a.get("/user/groups/"+e+"/quick-update/"+a+"/"+t,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},getGroup:function(e){return n.a.get("/groups/"+e,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},listUserGroups:function(e,a){return n.a.get("/user/groups/"+e+"/"+a,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},loadAllGroups:function(){return n.a.get("/user/groups",!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},deleteGroupById:function(e){return n.a.delete("/groups/".concat(e),!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))}};a.a=s}}]);