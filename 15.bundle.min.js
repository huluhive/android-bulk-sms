(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{354:function(e,a,t){"use strict";t.r(a);var n=t(17),s=t.n(n),r=t(0),l=t.n(r),c=t(1),m=t.n(c),i=t(67),o=t(123),u=t(2),d=t(43),p=t.n(d),E=t(99),f=t(101),g=t(23),b=t.n(g),N=t(35),v=t(37),h=t(29),S=t(98),y=t(51),C=t(52),M=t(28),k={createNewSms:function(e){return M.a.post("/smses/create",e,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},updateSms:function(e){return M.a.update("/smses/".concat(e.uuid),e,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},loadSmsMessages:function(){return M.a.get("user/smses",!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},deleteSmsById:function(e){return M.a.delete("/smses/".concat(e),!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},getSmsMessage:function(e){return M.a.get("/smses/".concat(e),!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},startSmsProcessing:function(e){return M.a.post("/smses/".concat(e,"/schedule"),{},!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},getSmsMessageSchedule:function(e,a,t,n){return M.a.get("/smses/".concat(e,"/schedule/").concat(t,"/").concat(n,"?status=").concat(a),!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},loadPaginatedSmsMessages:function(e,a,t){return M.a.get("/user/smses/"+a+"/"+t+"?status="+e,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))}},D=t(21),P=function(e){var a=Object(r.useState)([]),t=s()(a,2),n=t[0],c=t[1],m=Object(r.useState)(0),i=s()(m,2),o=i[0],d=i[1],g=Object(r.useState)([]),M=s()(g,2),P=M[0],O=M[1],w=Object(r.useState)("groups"),j=s()(w,2),I=j[0],x=j[1],T=Object(r.useState)(!1),L=s()(T,2),A=L[0],F=L[1],R=Object(r.useState)(""),G=s()(R,2),_=G[0],V=G[1],B=Object(r.useState)(""),q=s()(B,2),U=q[0],W=q[1],Y=Object(r.useState)([]),Q=s()(Y,2),z=Q[0],J=Q[1],$=Object(r.useState)([]),H=s()($,2),K=H[0],X=H[1],Z=Object(r.useState)(""),ee=s()(Z,2),ae=ee[0],te=ee[1],ne=Object(r.useState)(!1),se=s()(ne,2),re=se[0],le=se[1],ce=Object(v.a)(),me=ce.register,ie=ce.handleSubmit,oe=ce.errors,ue=ce.getValues,de=ce.formState,pe=ce.unregister,Ee=n.filter((function(e){return e.contactsCount>0})).map((function(e){return{label:e.name+" ("+e.contactsCount+")",value:e.id,data:e}}));Object(r.useEffect)((function(){fe(),ge()}),[]);var fe=function(){C.a.loadAllGroups().then((function(e){e.success&&c(e.result.data)})),S.a.loadSmsDevices().then((function(e){e.success&&O(e.result.data.filter((function(e){return!1===e.isDeleted})))}))},ge=function(){D.a.loadAssets({cssLinks:[],jsLinks:[]})},be=function(e){return e.length<1?[]:y.a.searchContacts(e).then((function(e){return e.success?e.result.data.map((function(e){return{label:e.firstName+" "+(e.lastName?e.lastName:""),value:e.id,data:e}})):[]}))},Ne=function(e){oe.contacts=e&&e.length?null:{message:"Please select at least one of the contacts"},X(e)},ve=function(e){oe.groups=e&&e.length?null:{message:"Please select at least one contact groups"},J(e)},he=function(e){switch(e){case"groups":pe("contacts"),x("groups");break;case"contacts":pe("groups"),x("contacts");break;default:pe("groups"),pe("contacts"),x("numbers")}};return l.a.createElement("form",{onSubmit:ie((function(a,t){F(!0),a.groups=z.map((function(e){return e.data})),a.userContacts=K.map((function(e){return e.data})),k.createNewSms(a).then((function(a){a.success&&(b.a.publish("SMS:ADDED",a.result.data),N.a.success(a.message,{position:"top-right"}),F(!1),t.target.reset(),J([]),X([]),e.cancel())}),(function(e){N.a.error(e.message,{position:"top-right"}),F(!1)}))}))},l.a.createElement("div",{className:"modal-body "+(A?"spinner pl-0":"")},l.a.createElement(u.a,{isLoading:A}),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"form-label"},"Send SMS To:"),l.a.createElement("div",{className:"selectgroup w-100"},l.a.createElement("label",{className:"selectgroup-item"},l.a.createElement("input",{type:"radio",name:"transportation",defaultValue:"groups",className:"selectgroup-input",defaultChecked:"groups"===I}),l.a.createElement("span",{className:"selectgroup-button selectgroup-button-icon",onClick:function(){return he("groups")}},l.a.createElement("i",{className:"fa fa-address-book"}),"  Contact Groups")),l.a.createElement("label",{className:"selectgroup-item"},l.a.createElement("input",{type:"radio",name:"transportation",defaultValue:"contacts",className:"selectgroup-input",defaultChecked:"contacts"===I}),l.a.createElement("span",{className:"selectgroup-button selectgroup-button-icon",onClick:function(){return he("contacts")}},l.a.createElement("i",{className:"fa fa-users"}),"  Selected Contacts")),l.a.createElement("label",{className:"selectgroup-item"},l.a.createElement("input",{type:"radio",name:"transportation",defaultValue:"numbers",className:"selectgroup-input",defaultChecked:"numbers"===I}),l.a.createElement("span",{className:"selectgroup-button selectgroup-button-icon",onClick:function(){return he("numbers")}},l.a.createElement("i",{className:"fas fa-mobile"}),"  Specified Phone Numbers")))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-4"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"form-control-label",htmlFor:"input-device"},"Choose Device:"),l.a.createElement("select",{id:"input-device",name:"smsDeviceId",className:"custom-select"+D.a.checkValadity("smsDeviceId",oe,de),ref:me({required:"Please select a SMS Device"}),onChange:function(e){return W(e.target.value)}},l.a.createElement("option",{key:"opt-no-device",value:""},"Select SMS Device"),P.filter((function(e){return e.isActive})).map((function(e){return l.a.createElement("option",{key:e.uuid,value:e.uuid},e.deviceName)}))),l.a.createElement("div",{className:"help-block"},l.a.createElement(h.a,{error:oe.smsDeviceId})))),l.a.createElement("div",{className:"col-lg-4"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"form-control-label",htmlFor:"input-device"},"SIM Card Options:"),l.a.createElement("select",{id:"input-device",name:"smsSimCardOption",className:"custom-select"+D.a.checkValadity("smsSimCardOption",oe,de),ref:me({required:"Please select a SMS Device"}),onChange:function(e){return te(e.target.value)}},l.a.createElement("option",{value:""},"Select SMS Device"),l.a.createElement("option",{value:"AUTO_SELECT"},"Auto Select SIM Card"),l.a.createElement("option",{value:"DEFAULT"},"Default SIM Card"),l.a.createElement("option",{value:"SELECTED"},"Selected SIM Card")),l.a.createElement("div",{className:"help-block"},l.a.createElement(h.a,{error:oe.smsSimCardOption})))),"SELECTED"===ae?l.a.createElement("div",{className:"col-lg-4"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"form-control-label",htmlFor:"input-sim-card"},"Choose SIM Card:"),l.a.createElement("select",{id:"input-sim-card",name:"simCardId",ref:me({required:"Please select the SIM card."}),className:"custom-select"+D.a.checkValadity("simCardId",oe,de)},function(e){var a=l.a.createElement("option",{key:"opt-none",value:""},"No SIM Cards");if(e){var t=P.find((function(a){return a.uuid===e}));t&&(a=[l.a.createElement("option",{key:"opt-select",value:""},"Select SIM Cards")].concat(p()(t.cards.filter((function(e){return e.isActive&&!e.isDeleted})).map((function(e){return l.a.createElement("option",{key:e.uuid,value:e.uuid},e.displayName)})))))}return a}(U)),l.a.createElement("div",{className:"help-block"},l.a.createElement(h.a,{error:oe.simCardId})))):""),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-8"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"form-control-label",htmlFor:"input-title"},"Message Title:"),l.a.createElement("input",{type:"text",id:"input-title",name:"title",placeholder:"Message title",className:"form-control"+D.a.checkValadity("title",oe,de),tabIndex:"1",ref:me({required:"Please enter your Message Title.",minLength:{value:6,message:"Message Title should be minimum of 6 characters."}})}),l.a.createElement("div",{className:"help-block"},l.a.createElement(h.a,{error:oe.title})))),l.a.createElement("div",{className:"col-lg-4"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"form-control-label",htmlFor:"input-type"},"Choose SMS Type:"),l.a.createElement("select",{id:"input-type",name:"smsType",className:"custom-select"+D.a.checkValadity("smsType",oe,de),ref:me({required:"Please select a Message Type"})},l.a.createElement("option",{key:"opt-no-device",value:""},"Select Message Type"),l.a.createElement("option",{key:"Business",value:"Business"},"Business"),l.a.createElement("option",{key:"Promotion",value:"Promotion"},"Promotion"),l.a.createElement("option",{key:"Offer",value:"Offer"},"Offer"),l.a.createElement("option",{key:"Wishes",value:"Wishes"},"Wishes"),l.a.createElement("option",{key:"Notification",value:"Notification"},"Notification"),l.a.createElement("option",{key:"Others",value:"Others"},"Others")),l.a.createElement("div",{className:"help-block"},l.a.createElement(h.a,{error:oe.smsType})))),l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"contents",className:"form-control-label mb-0"},"Message Body:"),l.a.createElement("div",{className:"mt-0 mb-2"},l.a.createElement("span",{className:"text-primary"},l.a.createElement("strong",null,l.a.createElement("i",{className:"fa fa-info-circle"})," Quick Tip:"," "),"You can customize the message using placeholders by clicking the ones below the message box.")),l.a.createElement("textarea",{name:"contents",rows:"4",placeholder:"Write your message here ...",className:"form-control"+D.a.checkValadity("contents",oe,de),tabIndex:"1",value:_,onChange:function(e){V(e.target.value),d(ue().contents.length)},ref:me({required:"Please enter your Message Body.",minLength:{value:10,message:"Message Body should be minimum of 10 characters."}})}),l.a.createElement("div",{className:"help-block"},l.a.createElement(h.a,{error:oe.contents})),l.a.createElement("div",{className:"bg-black pt-2"},l.a.createElement("span",null,l.a.createElement("strong",null,"Placeholders:")),l.a.createElement("span",{className:"float-right"},l.a.createElement("strong",null,l.a.createElement("span",{className:o>10&&o<=160?"text-success":"text-warning"},"Characters:"," "," ",o),l.a.createElement("span",{className:"text-light"}," ","|"," "),l.a.createElement("span",{className:"text-danger"},Math.ceil(o/160).toFixed(0)," Message(s)"))),l.a.createElement("div",{className:"mt-1"},l.a.createElement("span",{type:"button",className:"badge badge-primary pl-3 pr-3 pb-2 mr-2 mb-2",onClick:function(e){e.preventDefault(),V(_+" {firstName}")}},"First Name"),l.a.createElement("span",{type:"button",className:"badge badge-secondary pl-3 pr-3 pb-2 mr-2 mb-2",onClick:function(e){e.preventDefault(),V(_+"{lastName}")}},"Last Name"),l.a.createElement("span",{type:"button",className:"badge badge-warning pl-3 pr-3 pb-2 mr-2 mb-2",onClick:function(e){e.preventDefault(),V(_+" {senderName}")}},"Sender Name"),l.a.createElement("span",{type:"button",className:"badge badge-success pl-3 pr-3 pb-2 mr-2 mb-2",onClick:function(e){e.preventDefault(),V(_+" {senderEmail}")}},"Sender Email"))))),function(){if(!I)return"";var e="";switch(I){case"groups":e=l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"groups",className:"form-control-label mb-0"},"Select Groups:"),l.a.createElement("div",{className:"mt-0 mb-2"},l.a.createElement("span",{className:"text-primary"},l.a.createElement("strong",null,l.a.createElement("i",{className:"fa fa-info-circle"})," Info:"," ")," ","Choose the Group(s) to which this SMS message needs to be sent.")),l.a.createElement(E.a,{id:"groups",name:"groups",isMulti:!0,closeMenuOnSelect:!1,placeholder:"Select Messaging Groups",onChange:ve,options:Ee||[],value:z,ref:me({name:"groups"},{validate:function(){return!(!z||!z.length)||"Please select at least one contact groups"}})}),l.a.createElement("div",{className:"help-block"},l.a.createElement(h.a,{error:oe.groups}))));break;case"contacts":pe("groups"),e=l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"contacts",className:"form-control-label mb-0"},"Select Contacts:"),l.a.createElement("div",{className:"mt-0 mb-2"},l.a.createElement("span",{className:"text-primary"},l.a.createElement("strong",null,l.a.createElement("i",{className:"fa fa-info-circle"})," Info:"," ")," ","Choose the Contact(s) to which this SMS message needs to be sent.")),l.a.createElement(f.a,{id:"contacts",name:"contacts",isMulti:!0,loadOptions:be,closeMenuOnSelect:!1,placeholder:"Search Messaging Contacts",onChange:Ne,value:K,ref:me({name:"contacts"},{validate:function(){return!(!K||!K.length)||"Please select at least one of the contacts"}})}),l.a.createElement("div",{className:"help-block"},l.a.createElement(h.a,{error:oe.contacts}))));break;case"numbers":pe("groups"),pe("contacts"),e=l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"recepients",className:"form-control-label"},"Recepients:"),l.a.createElement("div",{className:"mt-0 mb-2"},l.a.createElement("span",{className:"text-primary"},l.a.createElement("i",{className:"fa fa-info-circle"})," Info:"," ",' "+" will be added automatically.')),l.a.createElement("input",{id:"recepients",name:"recepients",placeholder:"Eg. 977 9849038932, 977 8743987843",className:"form-control"+D.a.checkValadity("recepients",oe,de),ref:me({required:"Please enter your recepients.",pattern:{value:/^\d{9,13}(, \d{9,13})*$/i,message:"Each recepient must be separated by comma(,)"}})}),l.a.createElement("div",{className:"help-block"},l.a.createElement(h.a,{error:oe.recepients}))));break;default:e=l.a.createElement("div",{className:"text-danger"},"Recepient(s) is required.")}return e}(),l.a.createElement("div",{className:"col-lg-4"},l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:"form-control-label"},l.a.createElement("strong",null,"Is this a draft version?")),l.a.createElement("label",{className:"custom-switch mt-0 pl-0"},l.a.createElement("input",{type:"checkbox",name:"isInDraft",value:re,className:"custom-switch-input",defaultChecked:re,ref:me()}),l.a.createElement("div",{className:"help-block"},l.a.createElement(h.a,{error:oe.isInDraft})),l.a.createElement("span",{className:"custom-switch-indicator mt-2",onClick:function(){return le(!re)}}),l.a.createElement("span",{className:"custom-switch-description mt-2",onClick:function(){return le(!re)}},re?"Yes save as draft.":"No, this is final version.")))))),l.a.createElement("div",{className:"modal-footer bg-whitesmoke"},l.a.createElement("div",{className:"text-left"},l.a.createElement("button",{className:"btn btn-lg btn-success mr-2",type:"reset"},"Clear Form"),l.a.createElement("button",{className:"btn btn-lg btn-primary mr-2",type:"submit"},"Save Messaging Group"),l.a.createElement("button",{className:"btn btn-lg btn-danger mr-2",type:"buton","data-dismiss":"modal",onClick:e.cancel},"Cancel"))))};P.propTypes={history:m.a.any,cancel:m.a.func};var O=Object(o.g)(l.a.memo(P)),w=t(85),j=t(16),I=function(e){var a=Object(r.useState)(!1),t=s()(a,2),n=t[0],c=t[1],m=Object(r.useState)(e.smsMessage),i=s()(m,1)[0];return l.a.createElement("tr",null,l.a.createElement("td",null,D.a.truncateString(i.title,30)),l.a.createElement("td",{className:"text-center"},l.a.createElement("span",{className:"badge custom-badge badge-primary"},i.smsType.toUpperCase())),l.a.createElement("td",{className:"text-center"},i.senderDevice.deviceName),l.a.createElement("td",{className:"text-center"},"SELECTED_SIM_CARD"===i.simCardOption?l.a.createElement("span",{className:"badge custom-badge badge-"+("Ncell"===i.senderSimCard.carrierName?"primary":"info")},i.senderSimCard.carrierName.toUpperCase()):l.a.createElement("span",{className:"text-info"},l.a.createElement("i",{className:"fas fa-check-circle"})," ",D.a.capatalize(i.simCardOption))),l.a.createElement("td",{className:"text-center"},l.a.createElement("span",{className:"badge badge-secondary"},D.a.capatalize(i.status))),l.a.createElement("td",null,l.a.createElement("div",{className:"text-right dropdown"},l.a.createElement("button",{type:"button",className:"btn btn-outline-primary btn-md","data-toggle":"dropdown"},n?l.a.createElement("span",{className:"spinner-grow spinner-grow-sm"}):l.a.createElement("span",{className:"fa fa-ellipsis-v"})," ","Actions"),l.a.createElement("div",{className:"dropdown-menu dropdown-menu-right"},l.a.createElement("div",{className:"dropdown-title"},"Actions"),l.a.createElement(j.b,{className:"dropdown-item has-icon text-primary",to:"/dashboard/sms-messages/"+i.uuid+"/view"},l.a.createElement("i",{className:"fas fa-eye"})," View SMS Details"),"NEWLY_CREATED"===i.status&&i.isInDraft&&l.a.createElement(j.b,{className:"dropdown-item has-icon text-warning",to:"/dashboard/sms-messages/"+i.uuid+"/edit"},l.a.createElement("i",{className:"far fa-edit"})," Edit SMS Details"),"NEWLY_CREATED"===i.status&&l.a.createElement("div",null,l.a.createElement("div",{className:"dropdown-divider"}),l.a.createElement("a",{className:"dropdown-item has-icon text-info",href:"#",onClick:function(a){return t=a,n=i.uuid,t.preventDefault(),c(!0),void k.startSmsProcessing(n).then((function(a){a.success&&(c(!1),PubSub.publish("SUCCESS:MESSAGE",a.message),e.onDeleted(n))}),(function(e){PubSub.publish("ERROR:MESSAGE",e.message),c(!1)}));var t,n}},l.a.createElement("i",{className:"fa fa-paper-plane"})," Schedule SMS Message")),l.a.createElement("div",{className:"dropdown-divider"}),l.a.createElement("a",{className:"dropdown-item has-icon text-danger",href:"#",onClick:function(a){return t=a,n=i.uuid,t.preventDefault(),c(!0),void k.deleteSmsById(n).then((function(a){c(!1),a.success&&e.onDeleted(n)}));var t,n}},l.a.createElement("i",{className:"fas fa-trash-alt"})," Delete SMS")))))};I.propTypes={history:m.a.any,smsMessage:m.a.object.isRequired,onDeleted:m.a.func.isRequired};var x=Object(o.g)(l.a.memo(I)),T=function(){var e=Object(r.useState)(10),a=s()(e,1)[0],t=Object(r.useState)(!1),n=s()(t,2),c=n[0],m=n[1],i=Object(r.useState)(0),o=s()(i,2),d=o[0],p=o[1],E=Object(r.useState)({count:0,items:[]}),f=s()(E,2),g=f[0],N=f[1],v=Object(r.useState)({class:"primary",label:"Newly Created",status:"NEWLY_CREATED"}),h=s()(v,2),S=h[0],y=h[1];Object(r.useEffect)((function(){return D(),function(){b.a.clearAllSubscriptions()}}),[]);var C,M,D=function(){b.a.subscribe("SMS:ADDED",(function(e,a){console.log(a),p((function(a){"SMS:ADDED"===e&&P("NEWLY_CREATED",a)}))})),P("NEWLY_CREATED",d)},P=function(e,t){m(!0),k.loadPaginatedSmsMessages(e,t,a).then((function(e){m(!1),e.success&&(p(t),N(e.result.data))}),(function(e){m(!1),console.log(e.message)}))},O=function(e){N({count:g.count--,items:g.items.filter((function(a){return a.uuid!==e}))})},w=function(e,a){e.preventDefault(),a.status!==S.status&&(P(a.status,0),y(a))};return l.a.createElement("div",{className:"card card-"+S.class},l.a.createElement("div",{className:"card-header"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("ul",{className:"nav nav-pills"},l.a.createElement("li",{className:"nav-item mr-3",onClick:function(e){return w(e,{class:"primary",status:"NEWLY_CREATED",label:"Newly Created"})}},l.a.createElement("a",{className:"btn p-1 pl-3 pr-3"+("Newly Created"===S.label?" btn-primary":" btn-outline-primary"),href:"#"},"All Newly Added",l.a.createElement("span",{className:"badge badge-secondary"},l.a.createElement("i",{className:"fa fa-envelope"})))),l.a.createElement("li",{className:"nav-item mr-3",onClick:function(e){return w(e,{class:"info",status:"SENT_FOR_PROCESSING",label:"Queued"})}},l.a.createElement("a",{className:"btn p-1 pl-3 pr-3"+("All Scheduled"===S.label?" btn-info":" btn-outline-info"),href:"#"},"Scheduled"," ",l.a.createElement("span",{className:"badge badge-info"},l.a.createElement("i",{className:"fa fa-ellipsis-h"})))),l.a.createElement("li",{className:"nav-item mr-3",onClick:function(e){return w(e,{class:"warning",status:"BEING_PROCESSED",label:"Being Processed"})}},l.a.createElement("a",{className:"btn p-1 pl-3 pr-3"+("Being Processed"===S.label?" btn-warning":" btn-outline-warning"),href:"#"},"Being Processed",l.a.createElement("span",{className:"badge badge-warning"},l.a.createElement("i",{className:"fa fa-envelope-open"})))),l.a.createElement("li",{className:"nav-item mr-3",onClick:function(e){return w(e,{class:"success",status:"PROCESSING_COMPLETE",label:"Processing Complete"})}},l.a.createElement("a",{className:"btn p-1 pl-3 pr-3"+("Processing Complete"===S.label?" btn-success":" btn-outline-success"),href:"#"},"Processing Complete",l.a.createElement("span",{className:"badge badge-success"},l.a.createElement("i",{className:"fa fa-check"})))))))),l.a.createElement("div",{className:"card-body p-0"+(c?" spinner":"")},l.a.createElement(u.a,{isLoading:c}),l.a.createElement("div",{className:"standard-table table-responsive"},l.a.createElement("table",{className:"table table-stripped"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Message Title"),l.a.createElement("th",{className:"text-center"},"Type"),l.a.createElement("th",{className:"text-center"},"Sending Device"),l.a.createElement("th",{className:"text-center"},"Sending SIM Card"),l.a.createElement("th",{className:"text-center"},"Message Status"),l.a.createElement("th",null))),l.a.createElement("tbody",null,g.items.length?g.items.map((function(e){return l.a.createElement(x,{key:e.uuid,smsMessage:e,onDeleted:O})})):l.a.createElement("tr",{className:"text-"+S.class+" text-center"},l.a.createElement("td",{colSpan:7},l.a.createElement("strong",null,l.a.createElement("i",{className:"fa fa-info-circle"})," Info:"," "),l.a.createElement("span",{className:"mr-4"},"There are no SMS messages in this list yet!"))))))),l.a.createElement("div",{className:"text-center pb-4"},(C=g.count,M=Math.ceil(C/a),l.a.createElement("nav",{"aria-label":"Sms Messages Pagination"},l.a.createElement("ul",{className:"pagination justify-content-center mb-0"},l.a.createElement("li",{className:"page-item "+(d<=0?"disabled":"")},l.a.createElement("span",{className:"page-link",tabIndex:"-1",onClick:function(){return P(S.status,d-1)}},l.a.createElement("i",{className:"fas fa-angle-left"}),l.a.createElement("span",{className:"sr-only"},"Previous"))),function(){for(var e=[],a=function(a){e.push(l.a.createElement("li",{className:"page-item"+(a===d?" active":""),key:a,onClick:function(){return P(S.status,a)}},l.a.createElement("span",{className:"page-link"},a+1)))},t=0;t<M;t++)a(t);return l.a.createElement(r.Fragment,null,e)}(),l.a.createElement("li",{className:"page-item "+(M===d+1?"disabled":"")},l.a.createElement("span",{className:"page-link",onClick:function(){return P(S.status,d+1)}},l.a.createElement("i",{className:"fas fa-angle-right"}),l.a.createElement("span",{className:"sr-only"},"Next"))))))))};T.propTypes={history:m.a.any};var L=Object(o.g)(l.a.memo(T)),A=function(e){var a=Object(r.useState)(20),t=s()(a,1)[0],n=Object(r.useState)(!1),c=s()(n,2),m=c[0],o=c[1],d=Object(r.useState)(0),p=s()(d,2),E=p[0],f=p[1],g=Object(r.useState)(!1),N=s()(g,2),v=N[0],h=N[1],S=Object(r.useState)(!1),y=s()(S,2),C=y[0],M=y[1],P=Object(r.useState)({uuid:"",title:"",body:"",groups:[],status:""}),O=s()(P,2),w=O[0],j=O[1],I=Object(r.useState)({count:0,items:[]}),x=s()(I,2),T=x[0],L=x[1],A=Object(r.useState)({class:"primary",label:"Queued",status:"SMS_QUEUED"}),F=s()(A,2),R=F[0],G=F[1];Object(r.useEffect)((function(){return q(),function(){b.a.clearAllSubscriptions()}}),[]);var _,V,B,q=function(){U(e.match.params.smsMessageId)},U=function(e){h(!0),k.getSmsMessage(e).then((function(a){h(!1),a.success&&(j(a.result.data),W(e,R.status,E))}))},W=function(e,a,n){M(!0),k.getSmsMessageSchedule(e,a,n,t).then((function(e){M(!1),e.success&&(f(n),L(e.result.data))}),(function(e){b.a.publish("ERROR:MESSAGE",e.message),M(!1)}))},Y=function(e,a){e.preventDefault(),W(w.uuid,a.status,0),G(a)};return l.a.createElement(i.a,{in:!0,appear:!0,timeout:1500,classNames:"fade"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4 col-lg-4"},l.a.createElement("div",{className:"card "+("NEWLY_CREATED"!==w.status?"card-info":" card-primary")},l.a.createElement("div",{className:"card-header"},l.a.createElement("h4",null,l.a.createElement("i",{className:"fa fa-address-card"})," SMS Details"),l.a.createElement("div",{className:"card-header-action"},l.a.createElement("span",{className:"badge badge-"+(w.isInDraft?"warning":"info")},l.a.createElement("i",{className:"fas fa-"+(w.isInDraft?"file":"check")})," ",w.isInDraft?"Saved as Draft":D.a.capatalize(w.status)))),l.a.createElement("div",{className:"card-body"+(v?" pl-0 spinner min-height-500":"")},l.a.createElement(u.a,{isLoading:v}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("div",null,l.a.createElement("div",{className:"heading-md mt-2 mb-1"},l.a.createElement("strong",null,"Title:")),l.a.createElement("span",null,w.title))),l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("div",null,l.a.createElement("div",{className:"heading-md mt-2 mb-1"},l.a.createElement("strong",null,"Message Body:")),l.a.createElement("div",{className:"card card-body bg-light text-primary mb-1"},l.a.createElement("span",{style:{whiteSpace:"pre-wrap"}},w.contents)))),!(!w.groups||!w.groups.length)&&l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("div",null,l.a.createElement("div",{className:"heading-md mt-2 mb-1"},l.a.createElement("strong",null,"Message Groups:")),w.groups.map((function(e){return l.a.createElement("span",{key:e.uuid,type:"button",title:e.notes,className:"badge pl-2 pr-2 pb-1 pt-1 mr-2 mb-2 "+(e.isFavourite?"badge-primary":"badge-warning")},e.name)})))),!(!w.contacts||!w.contacts.length)&&l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("div",null,l.a.createElement("div",{className:"heading-md mt-2 mb-1"},l.a.createElement("strong",null,"Message Contacts:")),w.contacts.map((function(e){return l.a.createElement("span",{key:e.uuid,type:"button",title:e.firstName,className:"badge pl-2 pr-2 pb-1 pt-1 mr-2 mb-2 badge-primary"},e.firstName)})))),!(!w.recepients||!w.recepients.length)&&l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("div",null,l.a.createElement("div",{className:"heading-md mt-2 mb-1"},l.a.createElement("strong",null,"Message Contacts:")),w.recepients.map((function(e){return l.a.createElement("span",{key:e,type:"button",title:e,className:"badge pl-2 pr-2 pb-1 pt-1 mr-2 mb-2 badge-primary"},e)})))),l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("div",null,l.a.createElement("div",{className:"heading-md mt-2 mb-1"},l.a.createElement("strong",null,"Message Status:")),l.a.createElement("span",{className:"badge badge-info pl-2 pr-2 pb-1 pt-1 mr-2 mb-2"},D.a.capatalize(w.status)))),l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("div",null,l.a.createElement("div",{className:"heading-md mt-2 mb-1"},l.a.createElement("strong",null,"Message Date:")),l.a.createElement("span",null,l.a.createElement("i",{className:"fa fa-clock"})," ",w.createdDate))))),l.a.createElement("div",{className:"card-footer"},v?"":(B="NEWLY_CREATED"!==w.status,l.a.createElement("div",{className:"text-center"},l.a.createElement("span",{className:"btn btn-md mr-2 "+(B?"btn-info disabled":"btn-success"),disabled:B||w.isInDraft,type:"button",onClick:function(){return!B&&(a=e.match.params.smsMessageId,o(!0),void k.startSmsProcessing(a).then((function(e){e.success&&(j(w),W(a,R.status,E),w.status="SENT_FOR_PROCESSING",b.a.publish("SUCCESS:MESSAGE",e.message),o(!1))}),(function(e){b.a.publish("ERROR:MESSAGE",e.message),o(!1)})));var a}},m?l.a.createElement("span",{className:"spinner-grow spinner-grow-sm"}):""," ",B?"Sent":"Send"," ","For Processing"),l.a.createElement("span",{className:"btn btn-md btn-primary mr-2"+(B?" disabled":""),title:"Edit SMS",type:"button",disabled:B&&!w.isInDraft,onClick:function(a){return!B&&(t=w,a.preventDefault(),e.history.push("/dashboard/sms-messages/"+t.uuid+"/edit"));var t}},l.a.createElement("i",{className:"fa fa-pen"})),l.a.createElement("span",{className:"btn btn-md btn-danger mr-2"+(B?" disabled":""),title:"Delete SMS",type:"buton",disabled:B,onClick:function(a){return!B&&(t=a,n=w.uuid,t.preventDefault(),h(!0),void k.deleteSmsById(n).then((function(a){h(!1),a.success&&e.history.push("/dashboard/sms-messages")})));var t,n}},l.a.createElement("i",{className:"fa fa-trash"}))))))),l.a.createElement("div",{className:"col-md-8 col-lg-8"},l.a.createElement("div",{className:"card card-"+R.class},l.a.createElement("div",{className:"card-header"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("ul",{className:"nav nav-pills"},l.a.createElement("li",{className:"mr-3",onClick:function(e){return Y(e,{class:"secondary",status:"SMS_QUEUED",label:"Queued"})}},l.a.createElement("a",{className:"btn btn-md "+("Queued"===R.label?"btn-primary":"btn-outline-primary"),href:"#"},"Queued"," ",l.a.createElement("span",{className:"text-xs badge badge-secondary"},l.a.createElement("i",{className:"fa fa-angle-double-right"})))),l.a.createElement("li",{className:"mr-3",onClick:function(e){return Y(e,{class:"warning",status:"SMS_TRIED",label:"Tried"})}},l.a.createElement("a",{className:"btn btn-md "+("Tried"===R.label?"btn-warning":"btn-outline-warning"),href:"#"},"Tried Sending"," ",l.a.createElement("span",{className:"text-xs badge badge-warning"},l.a.createElement("i",{className:"fa fa-ellipsis-h"})))),l.a.createElement("li",{className:"mr-3",onClick:function(e){return Y(e,{class:"info",status:"SMS_SENT",label:"Sent"})}},l.a.createElement("a",{className:"btn btn-md "+("Sent"===R.label?"btn-info":"btn-outline-info"),href:"#"},"Sent"," ",l.a.createElement("span",{className:"text-xs badge badge-info"},l.a.createElement("i",{className:"fa fa-paper-plane"})))),l.a.createElement("li",{className:"mr-3",onClick:function(e){return Y(e,{class:"success",status:"SMS_DELIVERED",label:"Delivered"})}},l.a.createElement("a",{className:"btn btn-md "+("Delivered"===R.label?"btn-success":"btn-outline-success"),href:"#"},"Delivered"," ",l.a.createElement("span",{className:"text-xs badge badge-success"},l.a.createElement("i",{className:"fa fa-check"})))),l.a.createElement("li",{className:"mr-3",onClick:function(e){return Y(e,{class:"danger",status:"SMS_FAILED",label:"Failed"})}},l.a.createElement("a",{className:"btn btn-md "+("Failed"===R.label?"btn-danger":"btn-outline-danger"),href:"#"},"Failed"," ",l.a.createElement("span",{className:"text-xs badge badge-danger"},l.a.createElement("i",{className:"fa fa-exclamation-circle"})))))))),l.a.createElement("div",{className:"card-body pt-0 pl-0 pr-0 min-height-500 "+(C?" spinner":"")},l.a.createElement(u.a,{isLoading:C}),l.a.createElement("div",{className:"table-responsive"},l.a.createElement("table",{className:"table table-striped c-table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null),l.a.createElement("th",null,"Contact Name"),l.a.createElement("th",null,"Phone Number"),l.a.createElement("th",{className:"text-center"},"Sender SIM Card"))),l.a.createElement("tbody",null,T.items.length?T.items.map((function(e,a){return l.a.createElement("tr",{key:e.uuid},l.a.createElement("td",null,E+a+1),l.a.createElement("td",null,D.a.truncateString(e.receiver.name,25)),l.a.createElement("td",null,e.receiver.phoneNumber," "," ",l.a.createElement("small",{className:"badge custom-badge badge-"+("NCELL"===e.receiver.simType?"primary":"warning")},e.receiver.simType)),l.a.createElement("td",{className:"text-center"},l.a.createElement("span",{className:"badge pl-2 pr-2 pb-1 pt-1 badge-"+(e.sendingSimCard.isDefault?"primary":"success")},l.a.createElement("i",{className:"fa fa-check-circle"})," ",e.sendingSimCard.displayName)))})):l.a.createElement("tr",{className:"text-center text-"+R.class},l.a.createElement("td",{colSpan:4},l.a.createElement("strong",null,l.a.createElement("i",{className:"fa fa-info-circle"})," Info:"," "),l.a.createElement("span",{className:"mr-4"},"There are no SMS Messages yet!"))))))),l.a.createElement("div",{className:"card-footer"},(_=T.count,V=Math.ceil(_/t),l.a.createElement("nav",{"aria-label":"Sms Messages Pagination"},l.a.createElement("ul",{className:"pagination justify-content-center mb-0"},l.a.createElement("li",{className:"page-item "+(E<=0?"disabled":"")},l.a.createElement("span",{className:"page-link",tabIndex:"-1",onClick:function(){return W(w.uuid,R.status,E-1)}},l.a.createElement("i",{className:"fas fa-angle-left"}),l.a.createElement("span",{className:"sr-only"},"Previous"))),function(){for(var e=[],a=function(a){e.push(l.a.createElement("li",{className:"page-item"+(a===E?" active":""),key:a,onClick:function(){return W(w.uuid,R.status,a)}},l.a.createElement("span",{className:"page-link"},a+1)))},t=0;t<V;t++)a(t);return l.a.createElement(r.Fragment,null,e)}(),l.a.createElement("li",{className:"page-item "+(V===E+1?"disabled":"")},l.a.createElement("span",{className:"page-link",onClick:function(){return W(w.uuid,R.status,E+1)}},l.a.createElement("i",{className:"fas fa-angle-right"}),l.a.createElement("span",{className:"sr-only"},"Next")))))))))))};A.propTypes={history:m.a.any,match:m.a.any};var F=Object(o.g)(A),R=function(e){var a=Object(r.useState)([]),t=s()(a,2),n=t[0],c=t[1],m=Object(r.useState)(0),i=s()(m,2),o=i[0],d=i[1],g=Object(r.useState)([]),b=s()(g,2),M=b[0],P=b[1],O=Object(r.useState)("groups"),w=s()(O,2),I=w[0],x=w[1],T=Object(r.useState)(!1),L=s()(T,2),A=L[0],F=L[1],R=Object(r.useState)(""),G=s()(R,2),_=G[0],V=G[1],B=Object(r.useState)(!1),q=s()(B,2),U=q[0],W=q[1],Y=Object(r.useState)({}),Q=s()(Y,2),z=Q[0],J=Q[1],$=Object(r.useState)([]),H=s()($,2),K=H[0],X=H[1],Z=Object(r.useState)(null),ee=s()(Z,2),ae=ee[0],te=ee[1],ne=Object(r.useState)([]),se=s()(ne,2),re=se[0],le=se[1],ce=Object(r.useState)(null),me=s()(ce,2),ie=me[0],oe=me[1],ue=Object(r.useState)(null),de=s()(ue,2),pe=de[0],Ee=de[1],fe=Object(r.useState)(null),ge=s()(fe,2),be=ge[0],Ne=ge[1],ve=Object(v.a)(),he=ve.register,Se=ve.handleSubmit,ye=ve.errors,Ce=ve.getValues,Me=ve.formState,ke=ve.unregister,De=n.filter((function(e){return e.contactsCount>0})).map((function(e){return{label:e.name+" ("+e.contactsCount+")",value:e.id,data:e}})),Pe=M.filter((function(e){return!e.isDeleted&&e.isActive})).map((function(e){return{label:e.deviceName,value:e.uuid,data:e}})),Oe=[{label:"Auto Select SIM Card",value:"AUTO_SELECT"},{label:"Default SIM Card",value:"DEFAULT"},{label:"Selected SIM Card",value:"SELECTED"}],we=[{label:"Business",value:"Business"},{label:"Promotion",value:"Promotion"},{label:"Offer",value:"Offer"},{label:"Wishes",value:"Wishes"},{label:"Notification",value:"Notification"},{label:"Others",value:"Others"}];Object(r.useEffect)((function(){je(),Ie()}),[]);var je=function(){C.a.loadAllGroups().then((function(e){e.success&&c(e.result.data)})),S.a.loadSmsDevices().then((function(e){e.success&&P(e.result.data.filter((function(e){return!1===e.isDeleted})))})),F(!0),k.getSmsMessage(e.match.params.smsMessageId).then((function(e){e.success&&(J(e.result.data),W(e.result.data.isInDraft),V(e.result.data.contents),d(e.result.data.contents.length),Ee(we.find((function(a){return a.value===e.result.data.smsType}))),te({label:e.result.data.senderDevice.deviceName,value:e.result.data.senderDevice.uuid,data:e.result.data.senderDevice}),e.result.data.contacts.length?(x("contacts"),le(e.result.data.contacts.map((function(e){return{label:e.firstName+" "+e.lastName,value:e.uuid,data:e}})))):e.result.data.groups.length?(x("groups"),X(e.result.data.groups.map((function(e){return{label:e.name,value:e.id,data:e}})))):e.result.data.recepients.length&&x("numbers"),e.result.data.simCardOption&&(Ne(Oe.find((function(a){return a.value===e.result.data.simCardOption}))),"SELECTED"===e.result.data.simCardOption&&oe({label:e.result.data.senderSimCard.displayName,value:e.result.data.senderSimCard.uuid,data:e.result.data.senderSimCard}))),F(!1)}))},Ie=function(){D.a.loadAssets({cssLinks:[],jsLinks:[]})},xe=function(e){return e.length<1?[]:y.a.searchContacts(e).then((function(e){return e.success?e.result.data.map((function(e){return{label:e.firstName+" "+(e.lastName?e.lastName:""),value:e.id,data:e}})):[]}))},Te=function(e){ye.contacts=e&&e.length?null:{message:"Please select at least one of the contacts"},le(e)},Le=function(e){ye.groups=e&&e.length?null:{message:"Please select at least one contact groups"},X(e)},Ae=function(e){switch(e){case"groups":ke("contacts"),x("groups");break;case"contacts":ke("groups"),x("contacts");break;default:ke("groups"),ke("contacts"),x("numbers")}};return l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-body"},l.a.createElement("div",{className:"row align-items-center"},l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("h3",{className:"mb-0"},"Edit SMS Message "),l.a.createElement("span",{className:"text-primary"},l.a.createElement("strong",null,l.a.createElement("i",{className:"fa fa-info-circle"})," Info:"," "),"Your SMS Message information will be saved using ",l.a.createElement("strong",null,"bank level security"),".")))),l.a.createElement("form",{onSubmit:Se((function(a){F(!0),a.uuid=e.match.params.smsMessageId,a.smsDeviceId=ae.data.uuid,a.smsSimCardOption=be.value,a.smsType=pe.value,a.groups=K.map((function(e){return e.data})),a.userContacts=re.map((function(e){return e.data})),a.simCardId="SELECTED"===be.value?ie.data.uuid:null,k.updateSms(a).then((function(e){e.success&&(N.a.success(e.message,{position:"top-right"}),F(!1))}),(function(e){N.a.error(e.message,{position:"top-right"}),F(!1)}))}))},l.a.createElement("div",{className:"modal-body "+(A?"spinner pl-0":"")},l.a.createElement(u.a,{isLoading:A}),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"form-label"},"Send SMS To:"),l.a.createElement("div",{className:"selectgroup w-100"},l.a.createElement("label",{className:"selectgroup-item"},l.a.createElement("input",{type:"radio",name:"transportation",defaultValue:"groups",className:"selectgroup-input",defaultChecked:"groups"===I}),l.a.createElement("span",{className:"selectgroup-button selectgroup-button-icon",onClick:function(){return Ae("groups")}},l.a.createElement("i",{className:"fa fa-address-book"}),"  Contact Groups")),l.a.createElement("label",{className:"selectgroup-item"},l.a.createElement("input",{type:"radio",name:"transportation",defaultValue:"contacts",className:"selectgroup-input",defaultChecked:"contacts"===I}),l.a.createElement("span",{className:"selectgroup-button selectgroup-button-icon",onClick:function(){return Ae("contacts")}},l.a.createElement("i",{className:"fa fa-users"}),"  Selected Contacts")),l.a.createElement("label",{className:"selectgroup-item"},l.a.createElement("input",{type:"radio",name:"transportation",defaultValue:"numbers",className:"selectgroup-input",defaultChecked:"numbers"===I}),l.a.createElement("span",{className:"selectgroup-button selectgroup-button-icon",onClick:function(){return Ae("numbers")}},l.a.createElement("i",{className:"fas fa-mobile"}),"  Specified Phone Numbers")))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-4"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"smsDeviceId",className:"form-control-label"},"Choose SMS Device:"),l.a.createElement(E.a,{id:"smsDeviceId",name:"smsDeviceId",options:Pe||[],value:ae,placeholder:"Search SMS Device",onChange:function(e){te(e)},ref:he({name:"smsDeviceId"},{validate:function(){return!!ae||"Please select a SMS Device"}})}),l.a.createElement("div",{className:"help-block"},l.a.createElement(h.a,{error:ye.smsDeviceId})))),l.a.createElement("div",{className:"col-lg-4"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"simCardOption",className:"form-control-label"},"SIM Card Options:"),l.a.createElement(E.a,{id:"simCardOption",name:"simCardOption",options:Oe||[],value:be,placeholder:"Search SIM Card Options",onChange:function(e){Ne(e)},ref:he({name:"simCardOption"},{validate:function(){return!!be||"Please select a SIM Card option"}})}),l.a.createElement("div",{className:"help-block"},l.a.createElement(h.a,{error:ye.simCardOption})))),be&&"SELECTED"===be.value?l.a.createElement("div",{className:"col-lg-4"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"simCardId",className:"form-control-label"},"Choose SIM Card:"),l.a.createElement(E.a,{id:"simCardId",name:"simCardId",options:function(e){var a=[];if(e){var t=M.find((function(a){return a.uuid===e.value}));t&&(a=p()(t.cards.filter((function(e){return e.isActive&&!e.isDeleted})).map((function(e){return{label:e.displayName,value:e.uuid,data:e}}))))}return a}(ae)||[],value:ie,placeholder:"Search SIM Card",onChange:function(e){oe(e)},ref:he({name:"simCardId"},{validate:function(){return!!ie||"Please select a SIM Card"}})}),l.a.createElement("div",{className:"help-block"},l.a.createElement(h.a,{error:ye.simCardId})))):""),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-8"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"form-control-label",htmlFor:"input-title"},"Message Title:"),l.a.createElement("input",{type:"text",id:"input-title",name:"title",defaultValue:z.title,placeholder:"Message title",className:"form-control"+D.a.checkValadity("title",ye,Me),tabIndex:"1",ref:he({required:"Please enter your Message Title.",minLength:{value:6,message:"Message Title should be minimum of 6 characters."}})}),l.a.createElement("div",{className:"help-block"},l.a.createElement(h.a,{error:ye.title})))),l.a.createElement("div",{className:"col-lg-4"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"form-control-label",htmlFor:"smsType"},"Choose SMS Type:"),l.a.createElement(E.a,{id:"smsType",name:"smsType",options:we||[],value:pe,placeholder:"Search SMS Type",onChange:function(e){Ee(e)},ref:he({name:"smsType"},{validate:function(){return!!pe||"Please select a SMS Type"}})}),l.a.createElement("div",{className:"help-block"},l.a.createElement(h.a,{error:ye.smsType})))),l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"contents",className:"form-control-label mb-0"},"Message Body:"),l.a.createElement("div",{className:"mt-0 mb-2"},l.a.createElement("span",{className:"text-primary"},l.a.createElement("strong",null,l.a.createElement("i",{className:"fa fa-info-circle"})," Quick Tip:"," "),"You can customize the message using placeholders by clicking the ones below the message box.")),l.a.createElement("textarea",{name:"contents",rows:"4",placeholder:"Write your message here ...",className:"form-control"+D.a.checkValadity("contents",ye,Me),tabIndex:"1",value:_,onChange:function(e){V(e.target.value),d(Ce().contents.length)},ref:he({required:"Please enter your Message Body.",minLength:{value:10,message:"Message Body should be minimum of 10 characters."}})}),l.a.createElement("div",{className:"help-block"},l.a.createElement(h.a,{error:ye.contents})),l.a.createElement("div",{className:"bg-black pt-2"},l.a.createElement("span",null,l.a.createElement("strong",null,"Placeholders:")),l.a.createElement("span",{className:"float-right"},l.a.createElement("strong",null,l.a.createElement("span",{className:o>10&&o<=160?"text-success":"text-warning"},"Characters:"," "," ",o),l.a.createElement("span",{className:"text-light"}," ","|"," "),l.a.createElement("span",{className:"text-danger"},Math.ceil(o/160).toFixed(0)," Message(s)"))),l.a.createElement("div",{className:"mt-1"},l.a.createElement("span",{type:"button",className:"badge badge-primary pl-3 pr-3 pb-2 mr-2 mb-2",onClick:function(e){e.preventDefault(),V(_+" {firstName}")}},"First Name"),l.a.createElement("span",{type:"button",className:"badge badge-secondary pl-3 pr-3 pb-2 mr-2 mb-2",onClick:function(e){e.preventDefault(),V(_+"{lastName}")}},"Last Name"),l.a.createElement("span",{type:"button",className:"badge badge-warning pl-3 pr-3 pb-2 mr-2 mb-2",onClick:function(e){e.preventDefault(),V(_+" {senderName}")}},"Sender Name"),l.a.createElement("span",{type:"button",className:"badge badge-success pl-3 pr-3 pb-2 mr-2 mb-2",onClick:function(e){e.preventDefault(),V(_+" {senderEmail}")}},"Sender Email"))))),function(){if(!I)return"";var e="";switch(I){case"groups":e=l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"groups",className:"form-control-label mb-0"},"Select Groups:"),l.a.createElement("div",{className:"mt-0 mb-2"},l.a.createElement("span",{className:"text-primary"},l.a.createElement("strong",null,l.a.createElement("i",{className:"fa fa-info-circle"})," Info:"," ")," ","Choose the Group(s) to which this SMS message needs to be sent.")),l.a.createElement(E.a,{id:"groups",name:"groups",isMulti:!0,closeMenuOnSelect:!1,placeholder:"Select Messaging Groups",onChange:Le,options:De||[],value:K,ref:he({name:"groups"},{validate:function(){return!(!K||!K.length)||"Please select at least one contact groups"}})}),l.a.createElement("div",{className:"help-block"},l.a.createElement(h.a,{error:ye.groups}))));break;case"contacts":ke("groups"),e=l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"contacts",className:"form-control-label mb-0"},"Select Contacts:"),l.a.createElement("div",{className:"mt-0 mb-2"},l.a.createElement("span",{className:"text-primary"},l.a.createElement("strong",null,l.a.createElement("i",{className:"fa fa-info-circle"})," Info:"," ")," ","Choose the Contact(s) to which this SMS message needs to be sent.")),l.a.createElement(f.a,{id:"contacts",name:"contacts",isMulti:!0,loadOptions:xe,closeMenuOnSelect:!1,placeholder:"Search Messaging Contacts",onChange:Te,value:re,ref:he({name:"contacts"},{validate:function(){return!(!re||!re.length)||"Please select at least one of the contacts"}})}),l.a.createElement("div",{className:"help-block"},l.a.createElement(h.a,{error:ye.contacts}))));break;case"numbers":ke("groups"),ke("contacts"),e=l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"recepients",className:"form-control-label"},"Recepients:"),l.a.createElement("div",{className:"mt-0 mb-2"},l.a.createElement("span",{className:"text-primary"},l.a.createElement("i",{className:"fa fa-info-circle"})," Info:"," ",' "+" will be added automatically.')),l.a.createElement("input",{id:"recepients",name:"recepients",placeholder:"Eg. 977 9849038932, 977 8743987843",defaultValue:z.recepients?z.recepients.join(", "):"",className:"form-control"+D.a.checkValadity("recepients",ye,Me),ref:he({required:"Please enter your recepients.",pattern:{value:/^\d{9,13}(, \d{9,13})*$/i,message:"Each recepient must be separated by comma(,)"}})}),l.a.createElement("div",{className:"help-block"},l.a.createElement(h.a,{error:ye.recepients}))));break;default:e=l.a.createElement("div",{className:"text-danger"},"Recepient(s) is required.")}return e}(),l.a.createElement("div",{className:"col-lg-4"},l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:"form-control-label"},l.a.createElement("strong",null,"Is this a draft version?")),l.a.createElement("label",{className:"custom-switch mt-0 pl-0"},l.a.createElement("input",{type:"checkbox",name:"isInDraft",value:U,className:"custom-switch-input",checked:U,ref:he(),onChange:function(e){return e}}),l.a.createElement("div",{className:"help-block"},l.a.createElement(h.a,{error:ye.isInDraft})),l.a.createElement("span",{className:"custom-switch-indicator mt-2",onClick:function(){return W(!U)}}),l.a.createElement("span",{className:"custom-switch-description mt-2",onClick:function(){return W(!U)}},U?"Yes save as draft.":"No, this is final version.")))))),l.a.createElement("div",{className:"modal-footer bg-whitesmoke"},l.a.createElement("div",{className:"text-left"},l.a.createElement("button",{className:"btn btn-lg btn-primary mr-2",type:"submit"},"Update SMS Message"),l.a.createElement(j.b,{className:"btn btn-lg btn-danger mr-2",to:"/dashboard/sms-messages"},"Cancel")))))};R.propTypes={history:m.a.any,match:m.a.object};var G=Object(o.g)(l.a.memo(R)),_=[{path:"/dashboard/sms-messages",exact:!0,sidebar:function(){return l.a.createElement("div",null,"SMS Messages")},main:function(){return l.a.createElement(l.a.Suspense,{fallback:l.a.createElement(u.a,{isLoading:!0})},l.a.createElement(L,{title:"SMS Messages"}))}},{path:"/dashboard/sms-messages/:smsMessageId/view",exact:!0,sidebar:function(){return l.a.createElement("div",null,"View SMS Messages")},main:function(){return l.a.createElement(l.a.Suspense,{fallback:l.a.createElement(u.a,{isLoading:!0})},l.a.createElement(F,{title:"SMS Message Details"}))}},{path:"/dashboard/sms-messages/:smsMessageId/edit",exact:!0,sidebar:function(){return l.a.createElement("div",null,"Edit SMS Messages")},main:function(){return l.a.createElement(l.a.Suspense,{fallback:l.a.createElement(u.a,{isLoading:!0})},l.a.createElement(G,{title:"SMS Message Edit Form"}))}}],V=function(){var e=Object(r.useState)(!1),a=s()(e,1)[0],t=Object(r.useState)(!1),n=s()(t,2),c=n[0],m=n[1];Object(r.useEffect)((function(){d()}),[]);var d=function(){D.a.loadAssets({cssLinks:[],jsLinks:[""]})},p=function(){m(!c)};return l.a.createElement("div",{className:""},l.a.createElement(o.d,null,_.map((function(e,a){return l.a.createElement(o.b,{key:a,path:e.path,exact:e.exact})}))),l.a.createElement("section",{className:"section"},l.a.createElement(u.a,{isLoading:a}),l.a.createElement(i.a,{in:!0,appear:!0,timeout:500,classNames:"hero"},l.a.createElement("div",{className:"section-header"},l.a.createElement("h5",{className:"mb-0 mr-5"},l.a.createElement("i",{className:"fa fa-comments"})," SMS Messages"),l.a.createElement("div",{className:"buttons"},l.a.createElement("button",{type:"button",className:"btn mb-0 btn-primary btn-md text-small mr-3",onClick:function(){return p()}},l.a.createElement("span",{className:"badge badge-transparent"},l.a.createElement("i",{className:"fa fa-envelope"}))," ","New SMS Message")),l.a.createElement("div",{className:"section-header-breadcrumb"},l.a.createElement("div",{className:"breadcrumb-item active"},l.a.createElement("a",{href:"#"},"Dashboard")),l.a.createElement("div",{className:"breadcrumb-item"},"SMS Messages")))),l.a.createElement(i.a,{in:!0,appear:!0,timeout:1500,classNames:"fade"},l.a.createElement("div",{className:"section-body"},l.a.createElement(o.d,null,_.map((function(e,a){return l.a.createElement(o.b,{key:a,path:e.path,exact:e.exact,children:l.a.createElement(e.main,null)})})))))),l.a.createElement(w.a,{isOpen:c,header:l.a.createElement((function(){return l.a.createElement("div",{className:"row align-items-center"},l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("h3",{className:"mb-0"},"Create SMS Message "),l.a.createElement("span",{className:"text-primary"},l.a.createElement("strong",null,l.a.createElement("i",{className:"fa fa-info-circle"})," Info:"," "),"Your SMS Message information will be saved using ",l.a.createElement("strong",null,"bank level security"),".")))}),null),content:l.a.createElement(O,{cancel:p}),closeModal:p}))};V.propTypes={history:m.a.any};a.default=Object(o.g)(l.a.memo(V))},51:function(e,a,t){"use strict";var n=t(28),s={createContact:function(e){return n.a.post("/contacts/create",e,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},updateContact:function(e,a){return n.a.update("/user/contacts/"+e,a,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},quickUpdateUserContact:function(e,a,t){return n.a.get("/user/contacts/"+e+"/quick-update/"+a+"/"+t,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},uploadContacts:function(e){var a=new FormData;return a.append("action","import-contacts"),e.files.forEach((function(e){return a.append("files",e)})),n.a.post("/import/contacts",a,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},uploadGroupContacts:function(e){var a=new FormData;return a.append("groups",e.groups),e.files.forEach((function(e){return a.append("files",e)})),n.a.post("/import/group/contacts",a,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},searchContacts:function(e){return n.a.get("/user/contacts/search?query="+e,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},loadContactByUuid:function(e){return n.a.get("/user/contacts/"+e,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},loadPaginatedContacts:function(e,a){return n.a.get("/user/contacts/"+e+"/"+a,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},deleteContactById:function(e){return n.a.delete("/user/contacts/".concat(e),!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))}};a.a=s},52:function(e,a,t){"use strict";var n=t(28),s={createGroup:function(e){return n.a.post("/groups/create",e,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},updateGroup:function(e,a){return n.a.update("/groups/"+a,e,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},quickUpdateUserGroup:function(e,a,t){return n.a.get("/user/groups/"+e+"/quick-update/"+a+"/"+t,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},getGroup:function(e){return n.a.get("/groups/"+e,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},listUserGroups:function(e,a){return n.a.get("/user/groups/"+e+"/"+a,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},loadAllGroups:function(){return n.a.get("/user/groups",!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},deleteGroupById:function(e){return n.a.delete("/groups/".concat(e),!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))}};a.a=s}}]);