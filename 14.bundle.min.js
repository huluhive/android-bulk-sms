(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{386:function(e,a,t){"use strict";t.r(a);var s=t(18),n=t.n(s),l=t(0),r=t.n(l),c=t(1),m=t.n(c),o=t(387),i=t(31),u=t(2),d=t(40),p=t.n(d),E=t(94),f=t(96),b=t(23),g=t.n(b),N=t(32),v=t(33),h=t(28),S=t(93),y=t(48),C=t(49),k=t(26),M={createNewSms:function(e){return k.a.post("/smses/create",e,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},updateSms:function(e){return k.a.update("/smses/".concat(e.uuid),e,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},loadSmsMessages:function(){return k.a.get("user/smses",!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},deleteSmsById:function(e){return k.a.delete("/smses/".concat(e),!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},getSmsMessage:function(e){return k.a.get("/smses/".concat(e),!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},startSmsProcessing:function(e){return k.a.post("/smses/".concat(e,"/schedule"),{},!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},getSmsMessageSchedule:function(e,a,t,s){return k.a.get("/smses/".concat(e,"/schedule/").concat(t,"/").concat(s,"?status=").concat(a),!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},loadPaginatedSmsMessages:function(e,a,t){return k.a.get("/user/smses/"+a+"/"+t+"?status="+e,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))}},D=t(21),P=function(e){var a=Object(l.useState)([]),t=n()(a,2),s=t[0],c=t[1],m=Object(l.useState)(0),o=n()(m,2),i=o[0],d=o[1],b=Object(l.useState)([]),k=n()(b,2),P=k[0],O=k[1],w=Object(l.useState)("groups"),j=n()(w,2),I=j[0],x=j[1],T=Object(l.useState)(!1),L=n()(T,2),A=L[0],F=L[1],R=Object(l.useState)(""),G=n()(R,2),_=G[0],V=G[1],B=Object(l.useState)(""),q=n()(B,2),U=q[0],W=q[1],Y=Object(l.useState)([]),Q=n()(Y,2),z=Q[0],J=Q[1],$=Object(l.useState)([]),H=n()($,2),K=H[0],X=H[1],Z=Object(l.useState)(""),ee=n()(Z,2),ae=ee[0],te=ee[1],se=Object(l.useState)(!1),ne=n()(se,2),le=ne[0],re=ne[1],ce=Object(v.a)(),me=ce.register,oe=ce.handleSubmit,ie=ce.errors,ue=ce.getValues,de=ce.formState,pe=ce.unregister,Ee=s.filter((function(e){return e.contactsCount>0})).map((function(e){return{label:e.name+" ("+e.contactsCount+")",value:e.id,data:e}}));Object(l.useEffect)((function(){fe(),be()}),[]);var fe=function(){C.a.loadAllGroups().then((function(e){e.success&&c(e.result.data)})),S.a.loadSmsDevices().then((function(e){e.success&&O(e.result.data.filter((function(e){return!1===e.isDeleted})))}))},be=function(){D.a.loadAssets({cssLinks:[],jsLinks:[]})},ge=function(e){return e.length<1?[]:y.a.searchContacts(e).then((function(e){return e.success?e.result.data.map((function(e){return{label:e.firstName+" "+(e.lastName?e.lastName:""),value:e.id,data:e}})):[]}))},Ne=function(e){ie.contacts=e&&e.length?null:{message:"Please select at least one of the contacts"},X(e)},ve=function(e){ie.groups=e&&e.length?null:{message:"Please select at least one contact groups"},J(e)},he=function(e){switch(e){case"groups":pe("contacts"),x("groups");break;case"contacts":pe("groups"),x("contacts");break;default:pe("groups"),pe("contacts"),x("numbers")}};return r.a.createElement("form",{onSubmit:oe((function(a,t){F(!0),a.groups=z.map((function(e){return e.data})),a.userContacts=K.map((function(e){return e.data})),M.createNewSms(a).then((function(a){a.success&&(g.a.publish("SMS:ADDED",a.result.data),N.a.success(a.message,{position:"top-right"}),F(!1),t.target.reset(),J([]),X([]),e.cancel())}),(function(e){N.a.error(e.message,{position:"top-right"}),F(!1)}))}))},r.a.createElement("div",{className:"modal-body "+(A?"spinner pl-0":"")},r.a.createElement(u.a,{isLoading:A}),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"form-label"},"Send SMS To:"),r.a.createElement("div",{className:"selectgroup w-100"},r.a.createElement("label",{className:"selectgroup-item"},r.a.createElement("input",{type:"radio",name:"transportation",defaultValue:"groups",className:"selectgroup-input",defaultChecked:"groups"===I}),r.a.createElement("span",{className:"selectgroup-button selectgroup-button-icon",onClick:function(){return he("groups")}},r.a.createElement("i",{className:"fa fa-address-book"}),"  Contact Groups")),r.a.createElement("label",{className:"selectgroup-item"},r.a.createElement("input",{type:"radio",name:"transportation",defaultValue:"contacts",className:"selectgroup-input",defaultChecked:"contacts"===I}),r.a.createElement("span",{className:"selectgroup-button selectgroup-button-icon",onClick:function(){return he("contacts")}},r.a.createElement("i",{className:"fa fa-users"}),"  Selected Contacts")),r.a.createElement("label",{className:"selectgroup-item"},r.a.createElement("input",{type:"radio",name:"transportation",defaultValue:"numbers",className:"selectgroup-input",defaultChecked:"numbers"===I}),r.a.createElement("span",{className:"selectgroup-button selectgroup-button-icon",onClick:function(){return he("numbers")}},r.a.createElement("i",{className:"fas fa-mobile"}),"  Specified Phone Numbers")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"form-control-label",htmlFor:"input-device"},"Choose Device:"),r.a.createElement("select",{id:"input-device",name:"smsDeviceId",className:"custom-select"+D.a.checkValadity("smsDeviceId",ie,de),ref:me({required:"Please select a SMS Device"}),onChange:function(e){return W(e.target.value)}},r.a.createElement("option",{key:"opt-no-device",value:""},"Select SMS Device"),P.filter((function(e){return e.isActive})).map((function(e){return r.a.createElement("option",{key:e.uuid,value:e.uuid},e.deviceName)}))),r.a.createElement("div",{className:"help-block"},r.a.createElement(h.a,{error:ie.smsDeviceId})))),r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"form-control-label",htmlFor:"input-device"},"SIM Card Options:"),r.a.createElement("select",{id:"input-device",name:"smsSimCardOption",className:"custom-select"+D.a.checkValadity("smsSimCardOption",ie,de),ref:me({required:"Please select a SMS Device"}),onChange:function(e){return te(e.target.value)}},r.a.createElement("option",{value:""},"Select SMS Device"),r.a.createElement("option",{value:"AUTO_SELECT"},"Auto Select SIM Card"),r.a.createElement("option",{value:"DEFAULT"},"Default SIM Card"),r.a.createElement("option",{value:"SELECTED"},"Selected SIM Card")),r.a.createElement("div",{className:"help-block"},r.a.createElement(h.a,{error:ie.smsSimCardOption})))),"SELECTED"===ae?r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"form-control-label",htmlFor:"input-sim-card"},"Choose SIM Card:"),r.a.createElement("select",{id:"input-sim-card",name:"simCardId",ref:me({required:"Please select the SIM card."}),className:"custom-select"+D.a.checkValadity("simCardId",ie,de)},function(e){var a=r.a.createElement("option",{key:"opt-none",value:""},"No SIM Cards");if(e){var t=P.find((function(a){return a.uuid===e}));t&&(a=[r.a.createElement("option",{key:"opt-select",value:""},"Select SIM Cards")].concat(p()(t.cards.filter((function(e){return e.isActive&&!e.isDeleted})).map((function(e){return r.a.createElement("option",{key:e.uuid,value:e.uuid},e.displayName)})))))}return a}(U)),r.a.createElement("div",{className:"help-block"},r.a.createElement(h.a,{error:ie.simCardId})))):""),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-8"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"form-control-label",htmlFor:"input-title"},"Message Title:"),r.a.createElement("input",{type:"text",id:"input-title",name:"title",placeholder:"Message title",className:"form-control"+D.a.checkValadity("title",ie,de),tabIndex:"1",ref:me({required:"Please enter your Message Title.",minLength:{value:6,message:"Message Title should be minimum of 6 characters."}})}),r.a.createElement("div",{className:"help-block"},r.a.createElement(h.a,{error:ie.title})))),r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"form-control-label",htmlFor:"input-type"},"Choose SMS Type:"),r.a.createElement("select",{id:"input-type",name:"smsType",className:"custom-select"+D.a.checkValadity("smsType",ie,de),ref:me({required:"Please select a Message Type"})},r.a.createElement("option",{key:"opt-no-device",value:""},"Select Message Type"),r.a.createElement("option",{key:"Business",value:"Business"},"Business"),r.a.createElement("option",{key:"Promotion",value:"Promotion"},"Promotion"),r.a.createElement("option",{key:"Offer",value:"Offer"},"Offer"),r.a.createElement("option",{key:"Wishes",value:"Wishes"},"Wishes"),r.a.createElement("option",{key:"Notification",value:"Notification"},"Notification"),r.a.createElement("option",{key:"Others",value:"Others"},"Others")),r.a.createElement("div",{className:"help-block"},r.a.createElement(h.a,{error:ie.smsType})))),r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"contents",className:"form-control-label mb-0"},"Message Body:"),r.a.createElement("div",{className:"mt-0 mb-2"},r.a.createElement("span",{className:"text-primary"},r.a.createElement("strong",null,r.a.createElement("i",{className:"fa fa-info-circle"})," Quick Tip:"," "),"You can customize the message using placeholders by clicking the ones below the message box.")),r.a.createElement("textarea",{name:"contents",rows:"4",placeholder:"Write your message here ...",className:"form-control"+D.a.checkValadity("contents",ie,de),tabIndex:"1",value:_,onChange:function(e){V(e.target.value),d(ue().contents.length)},ref:me({required:"Please enter your Message Body.",minLength:{value:10,message:"Message Body should be minimum of 10 characters."}})}),r.a.createElement("div",{className:"help-block"},r.a.createElement(h.a,{error:ie.contents})),r.a.createElement("div",{className:"bg-black pt-2"},r.a.createElement("span",null,r.a.createElement("strong",null,"Placeholders:")),r.a.createElement("span",{className:"float-right"},r.a.createElement("strong",null,r.a.createElement("span",{className:i>10&&i<=160?"text-success":"text-warning"},"Characters:"," "," ",i),r.a.createElement("span",{className:"text-light"}," ","|"," "),r.a.createElement("span",{className:"text-danger"},Math.ceil(i/160).toFixed(0)," Message(s)"))),r.a.createElement("div",{className:"mt-1"},r.a.createElement("span",{type:"button",className:"badge badge-primary pl-3 pr-3 pb-2 mr-2 mb-2",onClick:function(e){e.preventDefault(),V(_+" {firstName}")}},"First Name"),r.a.createElement("span",{type:"button",className:"badge badge-secondary pl-3 pr-3 pb-2 mr-2 mb-2",onClick:function(e){e.preventDefault(),V(_+"{lastName}")}},"Last Name"),r.a.createElement("span",{type:"button",className:"badge badge-warning pl-3 pr-3 pb-2 mr-2 mb-2",onClick:function(e){e.preventDefault(),V(_+" {senderName}")}},"Sender Name"),r.a.createElement("span",{type:"button",className:"badge badge-success pl-3 pr-3 pb-2 mr-2 mb-2",onClick:function(e){e.preventDefault(),V(_+" {senderEmail}")}},"Sender Email"))))),function(){if(!I)return"";var e="";switch(I){case"groups":e=r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"groups",className:"form-control-label mb-0"},"Select Groups:"),r.a.createElement("div",{className:"mt-0 mb-2"},r.a.createElement("span",{className:"text-primary"},r.a.createElement("strong",null,r.a.createElement("i",{className:"fa fa-info-circle"})," Info:"," ")," ","Choose the Group(s) to which this SMS message needs to be sent.")),r.a.createElement(E.a,{id:"groups",name:"groups",isMulti:!0,closeMenuOnSelect:!1,placeholder:"Select Messaging Groups",onChange:ve,options:Ee||[],value:z,ref:me({name:"groups"},{validate:function(){return!(!z||!z.length)||"Please select at least one contact groups"}})}),r.a.createElement("div",{className:"help-block"},r.a.createElement(h.a,{error:ie.groups}))));break;case"contacts":pe("groups"),e=r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"contacts",className:"form-control-label mb-0"},"Select Contacts:"),r.a.createElement("div",{className:"mt-0 mb-2"},r.a.createElement("span",{className:"text-primary"},r.a.createElement("strong",null,r.a.createElement("i",{className:"fa fa-info-circle"})," Info:"," ")," ","Choose the Contact(s) to which this SMS message needs to be sent.")),r.a.createElement(f.a,{id:"contacts",name:"contacts",isMulti:!0,loadOptions:ge,closeMenuOnSelect:!1,placeholder:"Search Messaging Contacts",onChange:Ne,value:K,ref:me({name:"contacts"},{validate:function(){return!(!K||!K.length)||"Please select at least one of the contacts"}})}),r.a.createElement("div",{className:"help-block"},r.a.createElement(h.a,{error:ie.contacts}))));break;case"numbers":pe("groups"),pe("contacts"),e=r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"recepients",className:"form-control-label"},"Recepients:"),r.a.createElement("div",{className:"mt-0 mb-2"},r.a.createElement("span",{className:"text-primary"},r.a.createElement("i",{className:"fa fa-info-circle"})," Info:"," ",' "+" will be added automatically.')),r.a.createElement("input",{id:"recepients",name:"recepients",placeholder:"Eg. 977 9849038932, 977 8743987843",className:"form-control"+D.a.checkValadity("recepients",ie,de),ref:me({required:"Please enter your recepients.",pattern:{value:/^\d{9,13}(, \d{9,13})*$/i,message:"Each recepient must be separated by comma(,)"}})}),r.a.createElement("div",{className:"help-block"},r.a.createElement(h.a,{error:ie.recepients}))));break;default:e=r.a.createElement("div",{className:"text-danger"},"Recepient(s) is required.")}return e}(),r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"form-control-label"},r.a.createElement("strong",null,"Is this a draft version?")),r.a.createElement("label",{className:"custom-switch mt-0 pl-0"},r.a.createElement("input",{type:"checkbox",name:"isInDraft",value:le,className:"custom-switch-input",defaultChecked:le,ref:me()}),r.a.createElement("div",{className:"help-block"},r.a.createElement(h.a,{error:ie.isInDraft})),r.a.createElement("span",{className:"custom-switch-indicator mt-2",onClick:function(){return re(!le)}}),r.a.createElement("span",{className:"custom-switch-description mt-2",onClick:function(){return re(!le)}},le?"Yes save as draft.":"No, this is final version.")))))),r.a.createElement("div",{className:"modal-footer bg-whitesmoke"},r.a.createElement("div",{className:"text-left"},r.a.createElement("button",{className:"btn btn-lg btn-primary mr-2",type:"submit"},le?"Save as draft Message":"Save Messsage & Process later"),r.a.createElement("button",{className:"btn btn-lg btn-danger mr-2",type:"buton","data-dismiss":"modal",onClick:e.cancel},"Cancel"))))};P.propTypes={history:m.a.any,cancel:m.a.func};var O=Object(i.g)(r.a.memo(P)),w=t(81),j=t(17),I=function(e){var a=Object(l.useState)(!1),t=n()(a,2),s=t[0],c=t[1],m=Object(l.useState)(e.smsMessage),o=n()(m,1)[0];return r.a.createElement("tr",{className:"bg-light"},r.a.createElement("td",null,D.a.truncateString(o.title,30)),r.a.createElement("td",{className:"text-center"},r.a.createElement("span",{className:"badge custom-badge badge-primary"},o.smsType.toUpperCase())),r.a.createElement("td",{className:"text-center"},o.senderDevice.deviceName),r.a.createElement("td",{className:"text-center"},"SELECTED_SIM_CARD"===o.simCardOption?r.a.createElement("span",{className:"badge custom-badge badge-"+("Ncell"===o.senderSimCard.carrierName?"primary":"info")},o.senderSimCard.carrierName.toUpperCase()):r.a.createElement("span",{className:"text-info"},r.a.createElement("i",{className:"fas fa-check-circle"})," ",D.a.capatalize(o.simCardOption))),r.a.createElement("td",{className:"text-center"},"NEWLY_CREATED"===o.status?r.a.createElement("span",{className:"btn-primary btn btn-sm",onClick:function(a){return t=a,s=o.uuid,t.preventDefault(),c(!0),void M.startSmsProcessing(s).then((function(a){a.success&&(c(!1),PubSub.publish("SUCCESS:MESSAGE",a.message),e.onDeleted(s))}),(function(e){PubSub.publish("ERROR:MESSAGE",e.message),c(!1)}));var t,s}},s?r.a.createElement("span",{className:"spinner-grow spinner-grow-sm"}):r.a.createElement("span",{className:"fa fa-paper-plane"})," ",D.a.capatalize("Send for Processing")):r.a.createElement("span",{className:"badge badge-custom badge-info"},D.a.capatalize(o.status))),r.a.createElement("td",null,r.a.createElement("div",{className:"text-right dropdown"},r.a.createElement("button",{type:"button",className:"btn btn-outline-primary btn-sm","data-toggle":"dropdown"},r.a.createElement("span",{className:"fa fa-ellipsis-v"})," Actions"),r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right"},r.a.createElement("div",{className:"dropdown-title"},"Actions"),r.a.createElement(j.b,{className:"dropdown-item has-icon text-primary",to:"/dashboard/sms-messages/"+o.uuid+"/view"},r.a.createElement("i",{className:"fas fa-eye"})," View SMS Details"),"NEWLY_CREATED"===o.status&&o.isInDraft&&r.a.createElement(j.b,{className:"dropdown-item has-icon text-warning",to:"/dashboard/sms-messages/"+o.uuid+"/edit"},r.a.createElement("i",{className:"far fa-edit"})," Edit SMS Details"),r.a.createElement("div",{className:"dropdown-divider"}),r.a.createElement("a",{className:"dropdown-item has-icon text-danger",href:"#",onClick:function(a){return t=a,s=o.uuid,t.preventDefault(),c(!0),void M.deleteSmsById(s).then((function(a){c(!1),a.success&&e.onDeleted(s)}));var t,s}},r.a.createElement("i",{className:"fas fa-trash-alt"})," Delete SMS")))))};I.propTypes={history:m.a.any,smsMessage:m.a.object.isRequired,onDeleted:m.a.func.isRequired};var x=Object(i.g)(r.a.memo(I)),T=window.console,L=function(){var e=Object(l.useState)(10),a=n()(e,1)[0],t=Object(l.useState)(!1),s=n()(t,2),c=s[0],m=s[1],o=Object(l.useState)(0),i=n()(o,2),d=i[0],p=i[1],E=Object(l.useState)({count:0,items:[]}),f=n()(E,2),b=f[0],N=f[1],v=Object(l.useState)({class:"primary",label:"Newly Created",status:"NEWLY_CREATED"}),h=n()(v,2),S=h[0],y=h[1];Object(l.useEffect)((function(){return D(),function(){g.a.clearAllSubscriptions()}}),[]);var C,k,D=function(){g.a.subscribe("SMS:ADDED",(function(e,a){T.log(a),p((function(a){"SMS:ADDED"===e&&P("NEWLY_CREATED",a)}))})),P("NEWLY_CREATED",d)},P=function(e,t){m(!0),M.loadPaginatedSmsMessages(e,t,a).then((function(e){m(!1),e.success&&(p(t),N(e.result.data))}),(function(e){m(!1),T.log(e.message)}))},O=function(e){N({count:b.count--,items:b.items.filter((function(a){return a.uuid!==e}))})},w=function(e,a){e.preventDefault(),a.status!==S.status&&(P(a.status,0),y(a))};return r.a.createElement("div",{className:"card card-"+S.class},r.a.createElement("div",{className:"card-body card-"+S.class},r.a.createElement(u.a,{isLoading:c}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement("div",{className:"mb-2",onClick:function(e){return w(e,{class:"primary",status:"NEWLY_CREATED",label:"Newly Created"})}},r.a.createElement("a",{className:"btn btn-block text-left"+("Newly Created"===S.label?" btn-primary":" btn-outline-primary"),href:"#"},r.a.createElement("span",{className:"badge badge-secondary"},r.a.createElement("i",{className:"fa fa-envelope"}))," "," All Newly Added")),r.a.createElement("div",{className:"mb-2",onClick:function(e){return w(e,{class:"info",status:"SENT_FOR_PROCESSING",label:"Queued"})}},r.a.createElement("a",{className:"btn btn-block text-left"+("All Scheduled"===S.label?" btn-info":" btn-outline-info"),href:"#"},r.a.createElement("span",{className:"badge badge-info"},r.a.createElement("i",{className:"fa fa-ellipsis-h"}))," "," Scheduled Messages")),r.a.createElement("div",{className:"mb-2",onClick:function(e){return w(e,{class:"warning",status:"BEING_PROCESSED",label:"Being Processed"})}},r.a.createElement("a",{className:"btn btn-block text-left"+("Being Processed"===S.label?" btn-warning":" btn-outline-warning"),href:"#"},r.a.createElement("span",{className:"badge badge-warning"},r.a.createElement("i",{className:"fa fa-envelope-open"}))," "," Being Processed")),r.a.createElement("div",{className:"mb-2",onClick:function(e){return w(e,{class:"success",status:"PROCESSING_COMPLETE",label:"Processing Complete"})}},r.a.createElement("a",{className:"btn btn-block text-left"+("Processing Complete"===S.label?" btn-success":" btn-outline-success"),href:"#"},r.a.createElement("span",{className:"badge badge-success"},r.a.createElement("i",{className:"fa fa-check"}))," "," Processing Complete"))),r.a.createElement("div",{className:"col-md-10"+(c?" spinner":"")},r.a.createElement("div",{className:"standard-table table-responsive"},r.a.createElement("table",{className:"table table-stripped"},r.a.createElement("thead",{className:"bg-secondary"},r.a.createElement("tr",null,r.a.createElement("th",null,"Message Title"),r.a.createElement("th",{className:"text-center"},"Type"),r.a.createElement("th",{className:"text-center"},"Sending Device"),r.a.createElement("th",{className:"text-center"},"Sending SIM Card"),r.a.createElement("th",null),r.a.createElement("th",null))),r.a.createElement("tbody",null,b.items.length?b.items.map((function(e){return r.a.createElement(x,{key:e.uuid,smsMessage:e,onDeleted:O})})):r.a.createElement("tr",{className:"text-"+S.class+" text-center"},r.a.createElement("td",{colSpan:7},r.a.createElement("strong",null,r.a.createElement("i",{className:"fa fa-info-circle"})," Info:"," "),r.a.createElement("span",{className:"mr-4"},"There are no SMS messages in this list yet!")))))),r.a.createElement("div",{className:"text-center pb-4"},(C=b.count,k=Math.ceil(C/a),r.a.createElement("nav",{"aria-label":"Sms Messages Pagination"},r.a.createElement("ul",{className:"pagination justify-content-center mb-0"},r.a.createElement("li",{className:"page-item "+(d<=0?"disabled":"")},r.a.createElement("span",{className:"page-link",tabIndex:"-1",onClick:function(){return P(S.status,d-1)}},r.a.createElement("i",{className:"fas fa-angle-left"}),r.a.createElement("span",{className:"sr-only"},"Previous"))),function(){for(var e=[],a=function(a){e.push(r.a.createElement("li",{className:"page-item"+(a===d?" active":""),key:a,onClick:function(){return P(S.status,a)}},r.a.createElement("span",{className:"page-link"},a+1)))},t=0;t<k;t++)a(t);return r.a.createElement(l.Fragment,null,e)}(),r.a.createElement("li",{className:"page-item "+(k===d+1?"disabled":"")},r.a.createElement("span",{className:"page-link",onClick:function(){return P(S.status,d+1)}},r.a.createElement("i",{className:"fas fa-angle-right"}),r.a.createElement("span",{className:"sr-only"},"Next")))))))))))};L.propTypes={history:m.a.any};var A=Object(i.g)(r.a.memo(L)),F=function(e){var a=Object(l.useState)(20),t=n()(a,1)[0],s=Object(l.useState)(!1),c=n()(s,2),m=c[0],i=c[1],d=Object(l.useState)(0),p=n()(d,2),E=p[0],f=p[1],b=Object(l.useState)(!1),N=n()(b,2),v=N[0],h=N[1],S=Object(l.useState)(!1),y=n()(S,2),C=y[0],k=y[1],P=Object(l.useState)({uuid:"",title:"",body:"",groups:[],status:""}),O=n()(P,2),w=O[0],j=O[1],I=Object(l.useState)({count:0,items:[]}),x=n()(I,2),T=x[0],L=x[1],A=Object(l.useState)({class:"primary",label:"Queued",status:"SMS_QUEUED"}),F=n()(A,2),R=F[0],G=F[1];Object(l.useEffect)((function(){return q(),function(){g.a.clearAllSubscriptions()}}),[]);var _,V,B,q=function(){U(e.match.params.smsMessageId)},U=function(e){h(!0),M.getSmsMessage(e).then((function(a){h(!1),a.success&&(j(a.result.data),W(e,R.status,E))}))},W=function(e,a,s){k(!0),M.getSmsMessageSchedule(e,a,s,t).then((function(e){k(!1),e.success&&(f(s),L(e.result.data))}),(function(e){g.a.publish("ERROR:MESSAGE",e.message),k(!1)}))},Y=function(e,a){e.preventDefault(),W(w.uuid,a.status,0),G(a)};return r.a.createElement(o.a,{in:!0,appear:!0,timeout:1500,classNames:"fade"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4 col-lg-4"},r.a.createElement("div",{className:"card "+("NEWLY_CREATED"!==w.status?"card-info":" card-primary")},r.a.createElement("div",{className:"card-header"},r.a.createElement("h4",null,r.a.createElement("i",{className:"fa fa-address-card"})," SMS Details"),r.a.createElement("div",{className:"card-header-action"},r.a.createElement("span",{className:"badge badge-"+(w.isInDraft?"warning":"info")},r.a.createElement("i",{className:"fas fa-"+(w.isInDraft?"file":"check")})," ",w.isInDraft?"Saved as Draft":D.a.capatalize(w.status)))),r.a.createElement("div",{className:"card-body"+(v?" pl-0 spinner min-height-500":"")},r.a.createElement(u.a,{isLoading:v}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",null,r.a.createElement("div",{className:"heading-md mt-2 mb-1"},r.a.createElement("strong",null,"Title:")),r.a.createElement("span",null,w.title))),r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",null,r.a.createElement("div",{className:"heading-md mt-2 mb-1"},r.a.createElement("strong",null,"Message Body:")),r.a.createElement("div",{className:"card card-body bg-light text-primary mb-1"},r.a.createElement("span",{style:{whiteSpace:"pre-wrap"}},w.contents)))),!(!w.groups||!w.groups.length)&&r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",null,r.a.createElement("div",{className:"heading-md mt-2 mb-1"},r.a.createElement("strong",null,"Message Groups:")),w.groups.map((function(e){return r.a.createElement("span",{key:e.uuid,type:"button",title:e.notes,className:"badge pl-2 pr-2 pb-1 pt-1 mr-2 mb-2 "+(e.isFavourite?"badge-primary":"badge-warning")},e.name)})))),!(!w.contacts||!w.contacts.length)&&r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",null,r.a.createElement("div",{className:"heading-md mt-2 mb-1"},r.a.createElement("strong",null,"Message Contacts:")),w.contacts.map((function(e){return r.a.createElement("span",{key:e.uuid,type:"button",title:e.firstName,className:"badge pl-2 pr-2 pb-1 pt-1 mr-2 mb-2 badge-primary"},e.firstName)})))),!(!w.recepients||!w.recepients.length)&&r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",null,r.a.createElement("div",{className:"heading-md mt-2 mb-1"},r.a.createElement("strong",null,"Message Contacts:")),w.recepients.map((function(e){return r.a.createElement("span",{key:e,type:"button",title:e,className:"badge pl-2 pr-2 pb-1 pt-1 mr-2 mb-2 badge-primary"},e)})))),r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",null,r.a.createElement("div",{className:"heading-md mt-2 mb-1"},r.a.createElement("strong",null,"Message Status:")),r.a.createElement("span",{className:"badge badge-info pl-2 pr-2 pb-1 pt-1 mr-2 mb-2"},D.a.capatalize(w.status)))),r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",null,r.a.createElement("div",{className:"heading-md mt-2 mb-1"},r.a.createElement("strong",null,"Message Date:")),r.a.createElement("span",null,r.a.createElement("i",{className:"fa fa-clock"})," ",w.createdDate))))),r.a.createElement("div",{className:"card-footer"},v?"":(B="NEWLY_CREATED"!==w.status,r.a.createElement("div",{className:"text-center"},r.a.createElement("span",{className:"btn btn-md mr-2 "+(B?"btn-info disabled":"btn-success"),disabled:B||w.isInDraft,type:"button",onClick:function(){return!B&&(a=e.match.params.smsMessageId,i(!0),void M.startSmsProcessing(a).then((function(e){e.success&&(j(w),W(a,R.status,E),w.status="SENT_FOR_PROCESSING",g.a.publish("SUCCESS:MESSAGE",e.message),i(!1))}),(function(e){g.a.publish("ERROR:MESSAGE",e.message),i(!1)})));var a}},m?r.a.createElement("span",{className:"spinner-grow spinner-grow-sm"}):""," ",B?"Sent":"Send"," ","For Processing"),r.a.createElement("span",{className:"btn btn-md btn-primary mr-2"+(B?" disabled":""),title:"Edit SMS",type:"button",disabled:B&&!w.isInDraft,onClick:function(a){return!B&&(t=w,a.preventDefault(),e.history.push("/dashboard/sms-messages/"+t.uuid+"/edit"));var t}},r.a.createElement("i",{className:"fa fa-pen"})),r.a.createElement("span",{className:"btn btn-md btn-danger mr-2"+(B?" disabled":""),title:"Delete SMS",type:"buton",disabled:B,onClick:function(a){return!B&&(t=a,s=w.uuid,t.preventDefault(),h(!0),void M.deleteSmsById(s).then((function(a){h(!1),a.success&&e.history.push("/dashboard/sms-messages")})));var t,s}},r.a.createElement("i",{className:"fa fa-trash"}))))))),r.a.createElement("div",{className:"col-md-8 col-lg-8"},r.a.createElement("div",{className:"card card-"+R.class},r.a.createElement("div",{className:"card-header"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("ul",{className:"nav nav-pills"},r.a.createElement("li",{className:"mr-3",onClick:function(e){return Y(e,{class:"secondary",status:"SMS_QUEUED",label:"Queued"})}},r.a.createElement("a",{className:"btn btn-md "+("Queued"===R.label?"btn-primary":"btn-outline-primary"),href:"#"},"Queued"," ",r.a.createElement("span",{className:"text-xs badge badge-secondary"},r.a.createElement("i",{className:"fa fa-angle-double-right"})))),r.a.createElement("li",{className:"mr-3",onClick:function(e){return Y(e,{class:"warning",status:"SMS_TRIED",label:"Tried"})}},r.a.createElement("a",{className:"btn btn-md "+("Tried"===R.label?"btn-warning":"btn-outline-warning"),href:"#"},"Tried Sending"," ",r.a.createElement("span",{className:"text-xs badge badge-warning"},r.a.createElement("i",{className:"fa fa-ellipsis-h"})))),r.a.createElement("li",{className:"mr-3",onClick:function(e){return Y(e,{class:"info",status:"SMS_SENT",label:"Sent"})}},r.a.createElement("a",{className:"btn btn-md "+("Sent"===R.label?"btn-info":"btn-outline-info"),href:"#"},"Sent"," ",r.a.createElement("span",{className:"text-xs badge badge-info"},r.a.createElement("i",{className:"fa fa-paper-plane"})))),r.a.createElement("li",{className:"mr-3",onClick:function(e){return Y(e,{class:"success",status:"SMS_DELIVERED",label:"Delivered"})}},r.a.createElement("a",{className:"btn btn-md "+("Delivered"===R.label?"btn-success":"btn-outline-success"),href:"#"},"Delivered"," ",r.a.createElement("span",{className:"text-xs badge badge-success"},r.a.createElement("i",{className:"fa fa-check"})))),r.a.createElement("li",{className:"mr-3",onClick:function(e){return Y(e,{class:"danger",status:"SMS_FAILED",label:"Failed"})}},r.a.createElement("a",{className:"btn btn-md "+("Failed"===R.label?"btn-danger":"btn-outline-danger"),href:"#"},"Failed"," ",r.a.createElement("span",{className:"text-xs badge badge-danger"},r.a.createElement("i",{className:"fa fa-exclamation-circle"})))))))),r.a.createElement("div",{className:"card-body pt-0 pl-0 pr-0 min-height-500 "+(C?" spinner":"")},r.a.createElement(u.a,{isLoading:C}),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-striped c-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"Contact Name"),r.a.createElement("th",null,"Phone Number"),r.a.createElement("th",{className:"text-center"},"Sender SIM Card"))),r.a.createElement("tbody",null,T.items.length?T.items.map((function(e,a){return r.a.createElement("tr",{key:e.uuid},r.a.createElement("td",null,E+a+1),r.a.createElement("td",null,D.a.truncateString(e.receiver.name,25)),r.a.createElement("td",null,e.receiver.phoneNumber," ",r.a.createElement("small",{className:"badge custom-badge badge-"+("NCELL"===e.receiver.simType?"primary":"warning")},e.receiver.simType)),r.a.createElement("td",{className:"text-center"},r.a.createElement("span",{className:"badge pl-2 pr-2 pb-1 pt-1 badge-"+(e.sendingSimCard.isDefault?"primary":"success")},r.a.createElement("i",{className:"fa fa-check-circle"})," ",e.sendingSimCard.displayName)))})):r.a.createElement("tr",{className:"text-center text-"+R.class},r.a.createElement("td",{colSpan:4},r.a.createElement("strong",null,r.a.createElement("i",{className:"fa fa-info-circle"})," Info:"," "),r.a.createElement("span",{className:"mr-4"},"There are no SMS Messages yet!"))))))),r.a.createElement("div",{className:"card-footer"},(_=T.count,V=Math.ceil(_/t),r.a.createElement("nav",{"aria-label":"Sms Messages Pagination"},r.a.createElement("ul",{className:"pagination justify-content-center mb-0"},r.a.createElement("li",{className:"page-item "+(E<=0?"disabled":"")},r.a.createElement("span",{className:"page-link",tabIndex:"-1",onClick:function(){return W(w.uuid,R.status,E-1)}},r.a.createElement("i",{className:"fas fa-angle-left"}),r.a.createElement("span",{className:"sr-only"},"Previous"))),function(){for(var e=[],a=function(a){e.push(r.a.createElement("li",{className:"page-item"+(a===E?" active":""),key:a,onClick:function(){return W(w.uuid,R.status,a)}},r.a.createElement("span",{className:"page-link"},a+1)))},t=0;t<V;t++)a(t);return r.a.createElement(l.Fragment,null,e)}(),r.a.createElement("li",{className:"page-item "+(V===E+1?"disabled":"")},r.a.createElement("span",{className:"page-link",onClick:function(){return W(w.uuid,R.status,E+1)}},r.a.createElement("i",{className:"fas fa-angle-right"}),r.a.createElement("span",{className:"sr-only"},"Next")))))))))))};F.propTypes={history:m.a.any,match:m.a.any};var R=Object(i.g)(F),G=function(e){var a=Object(l.useState)([]),t=n()(a,2),s=t[0],c=t[1],m=Object(l.useState)(0),o=n()(m,2),i=o[0],d=o[1],b=Object(l.useState)([]),g=n()(b,2),k=g[0],P=g[1],O=Object(l.useState)("groups"),w=n()(O,2),I=w[0],x=w[1],T=Object(l.useState)(!1),L=n()(T,2),A=L[0],F=L[1],R=Object(l.useState)(""),G=n()(R,2),_=G[0],V=G[1],B=Object(l.useState)(!1),q=n()(B,2),U=q[0],W=q[1],Y=Object(l.useState)({}),Q=n()(Y,2),z=Q[0],J=Q[1],$=Object(l.useState)([]),H=n()($,2),K=H[0],X=H[1],Z=Object(l.useState)(null),ee=n()(Z,2),ae=ee[0],te=ee[1],se=Object(l.useState)([]),ne=n()(se,2),le=ne[0],re=ne[1],ce=Object(l.useState)(null),me=n()(ce,2),oe=me[0],ie=me[1],ue=Object(l.useState)(null),de=n()(ue,2),pe=de[0],Ee=de[1],fe=Object(l.useState)(null),be=n()(fe,2),ge=be[0],Ne=be[1],ve=Object(v.a)(),he=ve.register,Se=ve.handleSubmit,ye=ve.errors,Ce=ve.getValues,ke=ve.formState,Me=ve.unregister,De=s.filter((function(e){return e.contactsCount>0})).map((function(e){return{label:e.name+" ("+e.contactsCount+")",value:e.id,data:e}})),Pe=k.filter((function(e){return!e.isDeleted&&e.isActive})).map((function(e){return{label:e.deviceName,value:e.uuid,data:e}})),Oe=[{label:"Auto Select SIM Card",value:"AUTO_SELECT"},{label:"Default SIM Card",value:"DEFAULT"},{label:"Selected SIM Card",value:"SELECTED"}],we=[{label:"Business",value:"Business"},{label:"Promotion",value:"Promotion"},{label:"Offer",value:"Offer"},{label:"Wishes",value:"Wishes"},{label:"Notification",value:"Notification"},{label:"Others",value:"Others"}];Object(l.useEffect)((function(){je(),Ie()}),[]);var je=function(){C.a.loadAllGroups().then((function(e){e.success&&c(e.result.data)})),S.a.loadSmsDevices().then((function(e){e.success&&P(e.result.data.filter((function(e){return!1===e.isDeleted})))})),F(!0),M.getSmsMessage(e.match.params.smsMessageId).then((function(e){e.success&&(J(e.result.data),W(e.result.data.isInDraft),V(e.result.data.contents),d(e.result.data.contents.length),Ee(we.find((function(a){return a.value===e.result.data.smsType}))),te({label:e.result.data.senderDevice.deviceName,value:e.result.data.senderDevice.uuid,data:e.result.data.senderDevice}),e.result.data.contacts.length?(x("contacts"),re(e.result.data.contacts.map((function(e){return{label:e.firstName+" "+e.lastName,value:e.uuid,data:e}})))):e.result.data.groups.length?(x("groups"),X(e.result.data.groups.map((function(e){return{label:e.name,value:e.id,data:e}})))):e.result.data.recepients.length&&x("numbers"),e.result.data.simCardOption&&(Ne(Oe.find((function(a){return a.value===e.result.data.simCardOption}))),"SELECTED"===e.result.data.simCardOption&&ie({label:e.result.data.senderSimCard.displayName,value:e.result.data.senderSimCard.uuid,data:e.result.data.senderSimCard}))),F(!1)}))},Ie=function(){D.a.loadAssets({cssLinks:[],jsLinks:[]})},xe=function(e){return e.length<1?[]:y.a.searchContacts(e).then((function(e){return e.success?e.result.data.map((function(e){return{label:e.firstName+" "+(e.lastName?e.lastName:""),value:e.id,data:e}})):[]}))},Te=function(e){ye.contacts=e&&e.length?null:{message:"Please select at least one of the contacts"},re(e)},Le=function(e){ye.groups=e&&e.length?null:{message:"Please select at least one contact groups"},X(e)},Ae=function(e){switch(e){case"groups":Me("contacts"),x("groups");break;case"contacts":Me("groups"),x("contacts");break;default:Me("groups"),Me("contacts"),x("numbers")}};return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row align-items-center"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("h3",{className:"mb-0"},"Edit SMS Message "),r.a.createElement("span",{className:"text-primary"},r.a.createElement("strong",null,r.a.createElement("i",{className:"fa fa-info-circle"})," Info:"," "),"Your SMS Message information will be saved using ",r.a.createElement("strong",null,"bank level security"),".")))),r.a.createElement("form",{onSubmit:Se((function(a){F(!0),a.uuid=e.match.params.smsMessageId,a.smsDeviceId=ae.data.uuid,a.smsSimCardOption=ge.value,a.smsType=pe.value,a.groups=K.map((function(e){return e.data})),a.userContacts=le.map((function(e){return e.data})),a.simCardId="SELECTED"===ge.value?oe.data.uuid:null,M.updateSms(a).then((function(e){e.success&&(N.a.success(e.message,{position:"top-right"}),F(!1))}),(function(e){N.a.error(e.message,{position:"top-right"}),F(!1)}))}))},r.a.createElement("div",{className:"modal-body "+(A?"spinner pl-0":"")},r.a.createElement(u.a,{isLoading:A}),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"form-label"},"Send SMS To:"),r.a.createElement("div",{className:"selectgroup w-100"},r.a.createElement("label",{className:"selectgroup-item"},r.a.createElement("input",{type:"radio",name:"transportation",defaultValue:"groups",className:"selectgroup-input",defaultChecked:"groups"===I}),r.a.createElement("span",{className:"selectgroup-button selectgroup-button-icon",onClick:function(){return Ae("groups")}},r.a.createElement("i",{className:"fa fa-address-book"}),"  Contact Groups")),r.a.createElement("label",{className:"selectgroup-item"},r.a.createElement("input",{type:"radio",name:"transportation",defaultValue:"contacts",className:"selectgroup-input",defaultChecked:"contacts"===I}),r.a.createElement("span",{className:"selectgroup-button selectgroup-button-icon",onClick:function(){return Ae("contacts")}},r.a.createElement("i",{className:"fa fa-users"}),"  Selected Contacts")),r.a.createElement("label",{className:"selectgroup-item"},r.a.createElement("input",{type:"radio",name:"transportation",defaultValue:"numbers",className:"selectgroup-input",defaultChecked:"numbers"===I}),r.a.createElement("span",{className:"selectgroup-button selectgroup-button-icon",onClick:function(){return Ae("numbers")}},r.a.createElement("i",{className:"fas fa-mobile"}),"  Specified Phone Numbers")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"smsDeviceId",className:"form-control-label"},"Choose SMS Device:"),r.a.createElement(E.a,{id:"smsDeviceId",name:"smsDeviceId",options:Pe||[],value:ae,placeholder:"Search SMS Device",onChange:function(e){te(e)},ref:he({name:"smsDeviceId"},{validate:function(){return!!ae||"Please select a SMS Device"}})}),r.a.createElement("div",{className:"help-block"},r.a.createElement(h.a,{error:ye.smsDeviceId})))),r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"simCardOption",className:"form-control-label"},"SIM Card Options:"),r.a.createElement(E.a,{id:"simCardOption",name:"simCardOption",options:Oe||[],value:ge,placeholder:"Search SIM Card Options",onChange:function(e){Ne(e)},ref:he({name:"simCardOption"},{validate:function(){return!!ge||"Please select a SIM Card option"}})}),r.a.createElement("div",{className:"help-block"},r.a.createElement(h.a,{error:ye.simCardOption})))),ge&&"SELECTED"===ge.value?r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"simCardId",className:"form-control-label"},"Choose SIM Card:"),r.a.createElement(E.a,{id:"simCardId",name:"simCardId",options:function(e){var a=[];if(e){var t=k.find((function(a){return a.uuid===e.value}));t&&(a=p()(t.cards.filter((function(e){return e.isActive&&!e.isDeleted})).map((function(e){return{label:e.displayName,value:e.uuid,data:e}}))))}return a}(ae)||[],value:oe,placeholder:"Search SIM Card",onChange:function(e){ie(e)},ref:he({name:"simCardId"},{validate:function(){return!!oe||"Please select a SIM Card"}})}),r.a.createElement("div",{className:"help-block"},r.a.createElement(h.a,{error:ye.simCardId})))):""),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-8"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"form-control-label",htmlFor:"input-title"},"Message Title:"),r.a.createElement("input",{type:"text",id:"input-title",name:"title",defaultValue:z.title,placeholder:"Message title",className:"form-control"+D.a.checkValadity("title",ye,ke),tabIndex:"1",ref:he({required:"Please enter your Message Title.",minLength:{value:6,message:"Message Title should be minimum of 6 characters."}})}),r.a.createElement("div",{className:"help-block"},r.a.createElement(h.a,{error:ye.title})))),r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"form-control-label",htmlFor:"smsType"},"Choose SMS Type:"),r.a.createElement(E.a,{id:"smsType",name:"smsType",options:we||[],value:pe,placeholder:"Search SMS Type",onChange:function(e){Ee(e)},ref:he({name:"smsType"},{validate:function(){return!!pe||"Please select a SMS Type"}})}),r.a.createElement("div",{className:"help-block"},r.a.createElement(h.a,{error:ye.smsType})))),r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"contents",className:"form-control-label mb-0"},"Message Body:"),r.a.createElement("div",{className:"mt-0 mb-2"},r.a.createElement("span",{className:"text-primary"},r.a.createElement("strong",null,r.a.createElement("i",{className:"fa fa-info-circle"})," Quick Tip:"," "),"You can customize the message using placeholders by clicking the ones below the message box.")),r.a.createElement("textarea",{name:"contents",rows:"4",placeholder:"Write your message here ...",className:"form-control"+D.a.checkValadity("contents",ye,ke),tabIndex:"1",value:_,onChange:function(e){V(e.target.value),d(Ce().contents.length)},ref:he({required:"Please enter your Message Body.",minLength:{value:10,message:"Message Body should be minimum of 10 characters."}})}),r.a.createElement("div",{className:"help-block"},r.a.createElement(h.a,{error:ye.contents})),r.a.createElement("div",{className:"bg-black pt-2"},r.a.createElement("span",null,r.a.createElement("strong",null,"Placeholders:")),r.a.createElement("span",{className:"float-right"},r.a.createElement("strong",null,r.a.createElement("span",{className:i>10&&i<=160?"text-success":"text-warning"},"Characters:"," "," ",i),r.a.createElement("span",{className:"text-light"}," ","|"," "),r.a.createElement("span",{className:"text-danger"},Math.ceil(i/160).toFixed(0)," Message(s)"))),r.a.createElement("div",{className:"mt-1"},r.a.createElement("span",{type:"button",className:"badge badge-primary pl-3 pr-3 pb-2 mr-2 mb-2",onClick:function(e){e.preventDefault(),V(_+" {firstName}")}},"First Name"),r.a.createElement("span",{type:"button",className:"badge badge-secondary pl-3 pr-3 pb-2 mr-2 mb-2",onClick:function(e){e.preventDefault(),V(_+"{lastName}")}},"Last Name"),r.a.createElement("span",{type:"button",className:"badge badge-warning pl-3 pr-3 pb-2 mr-2 mb-2",onClick:function(e){e.preventDefault(),V(_+" {senderName}")}},"Sender Name"),r.a.createElement("span",{type:"button",className:"badge badge-success pl-3 pr-3 pb-2 mr-2 mb-2",onClick:function(e){e.preventDefault(),V(_+" {senderEmail}")}},"Sender Email"))))),function(){if(!I)return"";var e="";switch(I){case"groups":e=r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"groups",className:"form-control-label mb-0"},"Select Groups:"),r.a.createElement("div",{className:"mt-0 mb-2"},r.a.createElement("span",{className:"text-primary"},r.a.createElement("strong",null,r.a.createElement("i",{className:"fa fa-info-circle"})," Info:"," ")," ","Choose the Group(s) to which this SMS message needs to be sent.")),r.a.createElement(E.a,{id:"groups",name:"groups",isMulti:!0,closeMenuOnSelect:!1,placeholder:"Select Messaging Groups",onChange:Le,options:De||[],value:K,ref:he({name:"groups"},{validate:function(){return!(!K||!K.length)||"Please select at least one contact groups"}})}),r.a.createElement("div",{className:"help-block"},r.a.createElement(h.a,{error:ye.groups}))));break;case"contacts":Me("groups"),e=r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"contacts",className:"form-control-label mb-0"},"Select Contacts:"),r.a.createElement("div",{className:"mt-0 mb-2"},r.a.createElement("span",{className:"text-primary"},r.a.createElement("strong",null,r.a.createElement("i",{className:"fa fa-info-circle"})," Info:"," ")," ","Choose the Contact(s) to which this SMS message needs to be sent.")),r.a.createElement(f.a,{id:"contacts",name:"contacts",isMulti:!0,loadOptions:xe,closeMenuOnSelect:!1,placeholder:"Search Messaging Contacts",onChange:Te,value:le,ref:he({name:"contacts"},{validate:function(){return!(!le||!le.length)||"Please select at least one of the contacts"}})}),r.a.createElement("div",{className:"help-block"},r.a.createElement(h.a,{error:ye.contacts}))));break;case"numbers":Me("groups"),Me("contacts"),e=r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"recepients",className:"form-control-label"},"Recepients:"),r.a.createElement("div",{className:"mt-0 mb-2"},r.a.createElement("span",{className:"text-primary"},r.a.createElement("i",{className:"fa fa-info-circle"})," Info:"," ",' "+" will be added automatically.')),r.a.createElement("input",{id:"recepients",name:"recepients",placeholder:"Eg. 977 9849038932, 977 8743987843",defaultValue:z.recepients?z.recepients.join(", "):"",className:"form-control"+D.a.checkValadity("recepients",ye,ke),ref:he({required:"Please enter your recepients.",pattern:{value:/^\d{9,13}(, \d{9,13})*$/i,message:"Each recepient must be separated by comma(,)"}})}),r.a.createElement("div",{className:"help-block"},r.a.createElement(h.a,{error:ye.recepients}))));break;default:e=r.a.createElement("div",{className:"text-danger"},"Recepient(s) is required.")}return e}(),r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"form-control-label"},r.a.createElement("strong",null,"Is this a draft version?")),r.a.createElement("label",{className:"custom-switch mt-0 pl-0"},r.a.createElement("input",{type:"checkbox",name:"isInDraft",value:U,className:"custom-switch-input",checked:U,ref:he(),onChange:function(e){return e}}),r.a.createElement("div",{className:"help-block"},r.a.createElement(h.a,{error:ye.isInDraft})),r.a.createElement("span",{className:"custom-switch-indicator mt-2",onClick:function(){return W(!U)}}),r.a.createElement("span",{className:"custom-switch-description mt-2",onClick:function(){return W(!U)}},U?"Yes save as draft.":"No, this is final version.")))))),r.a.createElement("div",{className:"modal-footer bg-whitesmoke"},r.a.createElement("div",{className:"text-left"},r.a.createElement("button",{className:"btn btn-lg btn-primary mr-2",type:"submit"},"Update SMS Message"),r.a.createElement(j.b,{className:"btn btn-lg btn-danger mr-2",to:"/dashboard/sms-messages"},"Cancel")))))};G.propTypes={history:m.a.any,match:m.a.object};var _=Object(i.g)(r.a.memo(G)),V=[{path:"/dashboard/sms-messages",exact:!0,sidebar:function(){return r.a.createElement("div",null,"SMS Messages")},main:function(){return r.a.createElement(r.a.Suspense,{fallback:r.a.createElement(u.a,{isLoading:!0})},r.a.createElement(A,{title:"SMS Messages"}))}},{path:"/dashboard/sms-messages/:smsMessageId/view",exact:!0,sidebar:function(){return r.a.createElement("div",null,"View SMS Messages")},main:function(){return r.a.createElement(r.a.Suspense,{fallback:r.a.createElement(u.a,{isLoading:!0})},r.a.createElement(R,{title:"SMS Message Details"}))}},{path:"/dashboard/sms-messages/:smsMessageId/edit",exact:!0,sidebar:function(){return r.a.createElement("div",null,"Edit SMS Messages")},main:function(){return r.a.createElement(r.a.Suspense,{fallback:r.a.createElement(u.a,{isLoading:!0})},r.a.createElement(_,{title:"SMS Message Edit Form"}))}}],B=function(){var e=Object(l.useState)(!1),a=n()(e,1)[0],t=Object(l.useState)(!1),s=n()(t,2),c=s[0],m=s[1];Object(l.useEffect)((function(){d()}),[]);var d=function(){D.a.loadAssets({cssLinks:[],jsLinks:[""]})},p=function(){m(!c)},E=function(){return r.a.createElement("div",{className:"row align-items-center"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("h3",{className:"mb-0"},"Create SMS Message "),r.a.createElement("span",{className:"text-primary"},r.a.createElement("strong",null,r.a.createElement("i",{className:"fa fa-info-circle"})," Info:"," "),"Your SMS Message information will be saved using ",r.a.createElement("strong",null,"bank level security"),".")))};return r.a.createElement("div",{className:""},r.a.createElement(i.d,null,V.map((function(e,a){return r.a.createElement(i.b,{key:a,path:e.path,exact:e.exact})}))),r.a.createElement("section",{className:"section"},r.a.createElement(u.a,{isLoading:a}),r.a.createElement(o.a,{in:!0,appear:!0,timeout:500,classNames:"hero"},r.a.createElement("div",{className:"section-header"},r.a.createElement("h5",{className:"mb-0 mr-5"},r.a.createElement("i",{className:"fa fa-comments"})," SMS Messages"),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{type:"button",className:"btn mb-0 btn-primary btn-md text-small mr-3",onClick:function(){return p()}},r.a.createElement("span",{className:"badge badge-transparent"},r.a.createElement("i",{className:"fa fa-envelope"}))," ","New SMS Message")),r.a.createElement("div",{className:"section-header-breadcrumb"},r.a.createElement("div",{className:"breadcrumb-item active"},r.a.createElement("a",{href:"#"},"Dashboard")),r.a.createElement("div",{className:"breadcrumb-item"},"SMS Messages")))),r.a.createElement(o.a,{in:!0,appear:!0,timeout:1500,classNames:"fade"},r.a.createElement("div",{className:"section-body"},r.a.createElement("div",{className:"alert alert-light alert-has-icon"},r.a.createElement("div",{className:"alert-icon"},r.a.createElement("i",{className:"far fa-lightbulb"})),r.a.createElement("div",{className:"alert-body"},r.a.createElement("span",{className:"close","data-dismiss":"alert"},r.a.createElement("span",null,"×")),r.a.createElement("div",{className:"pt-1"},r.a.createElement("strong",null,"Once the messages are sent for processing, you need to check your mobile app to send it to your contacts.")))),r.a.createElement(i.d,null,V.map((function(e,a){return r.a.createElement(i.b,{key:a,path:e.path,exact:e.exact,children:r.a.createElement(e.main,null)})})))))),r.a.createElement(w.a,{isOpen:c,header:r.a.createElement(E,null),content:r.a.createElement(O,{cancel:p}),closeModal:p}))};B.propTypes={history:m.a.any};a.default=Object(i.g)(r.a.memo(B))},48:function(e,a,t){"use strict";var s=t(26),n={createContact:function(e){return s.a.post("/contacts/create",e,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},updateContact:function(e,a){return s.a.update("/user/contacts/"+e,a,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},quickUpdateUserContact:function(e,a,t){return s.a.get("/user/contacts/"+e+"/quick-update/"+a+"/"+t,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},uploadContacts:function(e){var a=new FormData;return a.append("action","import-contacts"),e.files.forEach((function(e){return a.append("files",e)})),s.a.post("/import/contacts",a,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},uploadGroupContacts:function(e){var a=new FormData;return a.append("groups",e.groups),e.files.forEach((function(e){return a.append("files",e)})),s.a.post("/import/group/contacts",a,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},searchContacts:function(e){return s.a.get("/user/contacts/search?query="+e,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},loadContactByUuid:function(e){return s.a.get("/user/contacts/"+e,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},loadPaginatedContacts:function(e,a){return s.a.get("/user/contacts/"+e+"/"+a,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},deleteContactById:function(e){return s.a.delete("/user/contacts/".concat(e),!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))}};a.a=n},49:function(e,a,t){"use strict";var s=t(26),n={createGroup:function(e){return s.a.post("/groups/create",e,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},updateGroup:function(e,a){return s.a.update("/groups/"+a,e,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},quickUpdateUserGroup:function(e,a,t){return s.a.get("/user/groups/"+e+"/quick-update/"+a+"/"+t,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},getGroup:function(e){return s.a.get("/groups/"+e,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},listUserGroups:function(e,a){return s.a.get("/user/groups/"+e+"/"+a,!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},loadAllGroups:function(){return s.a.get("/user/groups",!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))},deleteGroupById:function(e){return s.a.delete("/groups/".concat(e),!0).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))}};a.a=n}}]);